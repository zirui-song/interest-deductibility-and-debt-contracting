------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/zrsong/MIT Dropbox/Zirui Song/Research Projects/MPS_Interest Deductibility and Debt Contracting/4. Code/Dealscan_Analysis.lo
> g
  log type:  text
 opened on:  27 Jan 2025, 16:33:49

. 
. use "../3. Data/Processed/tranche_level_ds_compa.dta", clear

. 
. if "`c(hostname)'" == "mphill-surface4" {
. global overleaf_dir "C:\Users\mphill\Dropbox\Apps\Overleaf\M&A Debt\Tables"
. global fig_dir "C:\Users\mphill\Dropbox\Apps\Overleaf\M&A Debt\Figures"
.         
. }

. 
. global overleaf_dir "/Users/zrsong/Dropbox (MIT)/Apps/Overleaf/M&A Debt/Tables"

. global fig_dir "/Users/zrsong/Dropbox (MIT)/Apps/Overleaf/M&A Debt/Figures"

. 
. keep if year >= 2014
(0 observations deleted)

. 
. * Check if the directory exists, if not create it
. cap mkdir "$overleaf_dir"

. 
. * gen logged bps
. gen log_margin_bps = log(margin_bps)

. gen log_at = log(at)

. gen log_deal_amount_converted = log(deal_amount_converted)

. 
. *** treatment
. /*replace treated = 0 if treated_loss == 1
> replace treated_prev_3yr = 0 if treated_loss_prev_3yr == 1
> replace treated_prev_5yr = 0 if treated_loss_prev_5yr == 1
> replace treated_next_1yr = 0 if treated_loss_next_1yr == 1
> replace treated_next_3yr = 0 if treated_loss_next_3yr == 1
> replace treated_next_5yr = 0 if treated_loss_next_5yr == 1 */
. 
. local controls "log_at cash_flows_by_at market_to_book ppent_by_at debt_by_at cash_by_at sales_growth dividend_payer nol ret_vol"

. local deal_controls "leveraged maturity log_deal_amount_converted secured_dummy tranche_type_dummy tranche_o_a_dummy sponsor_dummy"

. 
. * generate interaction between controls and post
. foreach var in `controls' {
  2.     gen `var'_post = `var' * post
  3.         gen `var'_treated = `var' * treated
  4.         gen `var'_treated_loss = `var' * treated_loss
  5. }

. 
. local controls_post "log_at_post cash_flows_by_at_post market_to_book_post ppent_by_at_post debt_by_at_post cash_by_at_post sales_growth_post 
> dividend_payer_post nol_post ret_vol_post"

. local controls_treated "log_at_treated cash_flows_by_at_treated market_to_book_treated ppent_by_at_treated debt_by_at_treated cash_by_at_treat
> ed sales_growth_treated dividend_payer_treated nol_treated ret_vol_treated"

. local controls_treated_loss "log_at_treated_loss cash_flows_by_at_treated_loss market_to_book_treated_loss ppent_by_at_treated_loss debt_by_at
> _treated_loss cash_by_at_treated_loss sales_growth_treated_loss dividend_payer_treated_loss nol_treated_loss ret_vol_treated_loss"

. 
. * winsorize at 1% and 99%
. foreach var in margin_bps log_margin_bps `controls' `deal_controls' `controls_post' `controls_treated' `controls_treated_loss' {
  2.     winsor2 `var', cuts(1 99) replace
  3. }

. 
. * label controls and treated, post, and treated_post
. label variable log_at "Log Total Assets"

. label variable cash_flows_by_at "Cash Flows / Assets"

. label variable market_to_book "Market to Book Ratio"

. label variable ppent_by_at "PP\&E / Assets"

. label variable debt_by_at "Debt / Assets"

. label variable cash_by_at "Cash / Assets"

. label variable sales_growth "Sales Growth"

. label variable dividend_payer "Dividend Payer"

. label variable z_score "Z-Score"

. label variable nol "Net Operating Loss"

. label variable ret_buy_and_hold "Buy and Hold Return"

. label variable ret_vol "Return Volatility"

. 
. label variable leveraged "Leveraged"

. label variable maturity "Maturity"

. label variable log_deal_amount_converted "Log Loan Amount"

. label variable secured_dummy "Secured"

. label variable tranche_type_dummy "Tranche Type"

. label variable tranche_o_a_dummy "Origination"

. label variable sponsor_dummy "Sponsored"

. 
. label variable treated "Excess Interest (30\% Rule)"

. label variable post "Post"

. label variable treated_post "Excess Interest (30\% Rule) x Post"

. label variable treated_loss "Excess Interest (Loss Rule)"

. label variable treated_loss_post "Excess Interest (Loss Rule) x Post"

. 
. label variable treated_prev_3yr "Excess Interest (30\% Rule, Previous 3 Years)"

. label variable treated_prev_3yr_post "Excess Interest (30\% Rule, Previous 3 Years) x Post"

. label variable treated_loss_prev_3yr "Excess Interest (Loss Rule, Previous 3 Years)"

. label variable treated_loss_prev_3yr_post "Excess Interest (Loss Rule, Previous 3 Years) x Post"

. label variable treated_prev_5yr "Excess Interest (30\% Rule, Previous 5 Years)"

. label variable treated_prev_5yr_post "Excess Interest (30\% Rule, Previous 5 Years) x Post"

. label variable treated_loss_prev_5yr "Excess Interest (Loss Rule, Previous 5 Years)"

. label variable treated_loss_prev_5yr_post "Excess Interest (Loss Rule, Previous 5 Years) x Post"

. 
. save "../3. Data/Processed/tranche_level_ds_compa_wlabel.dta", replace
file ../3. Data/Processed/tranche_level_ds_compa_wlabel.dta saved

. 
. /***********
>         Bring in SP Ratings
>         ***********/
.         
.         use "../3. Data/Processed/tranche_level_ds_compa_wlabel.dta", clear

. 
. capture program drop clean_rating

. program define clean_rating
  1.         rename currentratingsymbol sp_rating
  2.         replace sp_rating = subinstr(sp_rating, " prelim", "", .) 
  3. 
.         gen sp_rating_num = .
  4.         replace sp_rating_num = 21 if sp_rating == "AAA"
  5.         * replace sp_rating_num = 21 if sp_rating == "AA+" (only 1 obs)
.         replace sp_rating_num = 20 if sp_rating == "AA" | sp_rating == "ilAA" | sp_rating == "AA+"
  6.         replace sp_rating_num = 19 if sp_rating == "AA-"
  7.         replace sp_rating_num = 18 if sp_rating == "A+"
  8.         replace sp_rating_num = 17 if sp_rating == "A"
  9.         replace sp_rating_num = 16 if sp_rating == "A-" | sp_rating == "A-1+" | sp_rating == "A-2" | sp_rating == "A-3"
 10.         replace sp_rating_num = 15 if sp_rating == "BBB+"
 11.         replace sp_rating_num = 14 if sp_rating == "BBB"
 12.         replace sp_rating_num = 13 if sp_rating == "BBB-"
 13.         replace sp_rating_num = 12 if sp_rating == "BB+"
 14.         replace sp_rating_num = 11 if sp_rating == "BB"
 15.         replace sp_rating_num = 10 if sp_rating == "BB-"
 16.         replace sp_rating_num = 9  if sp_rating == "B+"
 17.         replace sp_rating_num = 8  if sp_rating == "B"
 18.         replace sp_rating_num = 7  if sp_rating == "B-"
 19.         replace sp_rating_num = 6  if sp_rating == "CCC+"
 20.         replace sp_rating_num = 5  if sp_rating == "CCC"
 21.         replace sp_rating_num = 4  if sp_rating == "CCC-"
 22.         replace sp_rating_num = 3  if sp_rating == "CC"
 23.         replace sp_rating_num = 2  if sp_rating == "C"
 24.         replace sp_rating_num = 1  if sp_rating == "D"
 25.         replace sp_rating_num = 0 if sp_rating_num == .
 26. end

. 
. clean_rating
(19 real changes made)
(4,712 missing values generated)
(0 real changes made)
(5 real changes made)
(11 real changes made)
(25 real changes made)
(36 real changes made)
(353 real changes made)
(209 real changes made)
(282 real changes made)
(226 real changes made)
(209 real changes made)
(365 real changes made)
(296 real changes made)
(268 real changes made)
(345 real changes made)
(114 real changes made)
(26 real changes made)
(5 real changes made)
(5 real changes made)
(0 real changes made)
(0 real changes made)
(11 real changes made)
(1,921 real changes made)

. 
. local controls "log_at cash_flows_by_at market_to_book ppent_by_at debt_by_at cash_by_at sales_growth dividend_payer nol ret_vol"

. local deal_controls "leveraged maturity log_deal_amount_converted secured_dummy tranche_type_dummy tranche_o_a_dummy sponsor_dummy"

. local treat_vars "treated treated_post treated_loss treated_loss_post"  

. 
. gen not_rated = 1 if sp_rating_num == 0
(2,791 missing values generated)

. replace not_rated = 0 if not_rated == .
(2,791 real changes made)

. 
. label var sp_rating_num "S\&P Rating"

. label var not_rated "Not Rated"

. 
. * LHS Sample Composition Tests
. reghdfe not_rated `treat_vars' `controls' `deal_controls', absorb(year ff_48) vce(cluster gvkey)
(MWFE estimator converged in 6 iterations)

HDFE Linear regression                            Number of obs   =      4,712
Absorbing 2 HDFE groups                           F(  21,   1518) =      24.65
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.2509
                                                  Adj R-squared   =     0.2383
                                                  Within R-sq.    =     0.1995
Number of clusters (gvkey)   =      1,519         Root MSE        =     0.4289

                                           (Std. err. adjusted for 1,519 clusters in gvkey)
-------------------------------------------------------------------------------------------
                          |               Robust
                not_rated | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |  -.0043097   .0544008    -0.08   0.937    -.1110183    .1023989
             treated_post |   .0641923   .0625507     1.03   0.305    -.0585026    .1868872
             treated_loss |    .012831   .0501505     0.26   0.798    -.0855406    .1112025
        treated_loss_post |   .0189655   .0576464     0.33   0.742    -.0941095    .1320405
                   log_at |  -.0975185   .0098233    -9.93   0.000    -.1167872   -.0782497
         cash_flows_by_at |  -.5664944   .1594373    -3.55   0.000     -.879235   -.2537537
           market_to_book |   .0253763   .0121129     2.09   0.036     .0016165     .049136
              ppent_by_at |    .039707   .0666262     0.60   0.551    -.0909822    .1703962
               debt_by_at |  -.2189071   .0684199    -3.20   0.001    -.3531147   -.0846996
               cash_by_at |   .0435309    .106268     0.41   0.682    -.1649168    .2519787
             sales_growth |  -.0152793   .0397043    -0.38   0.700    -.0931603    .0626017
           dividend_payer |   .0355735   .0278822     1.28   0.202    -.0191183    .0902653
                      nol |  -.0750509   .0285611    -2.63   0.009    -.1310742   -.0190275
                  ret_vol |  -.0909827   .1993696    -0.46   0.648    -.4820518    .3000864
                leveraged |  -.0050329   .0280469    -0.18   0.858    -.0600477     .049982
                 maturity |  -.0163369   .0062267    -2.62   0.009    -.0285507    -.004123
log_deal_amount_converted |  -.0397842   .0113572    -3.50   0.000    -.0620617   -.0175067
            secured_dummy |  -.0378382   .0253174    -1.49   0.135    -.0874991    .0118227
       tranche_type_dummy |  -.0336715   .0131467    -2.56   0.011    -.0594592   -.0078839
        tranche_o_a_dummy |  -.0105081   .0202737    -0.52   0.604    -.0502755    .0292594
            sponsor_dummy |   .0233556   .0319628     0.73   0.465    -.0393403    .0860515
                    _cons |    1.69701   .0907573    18.70   0.000     1.518987    1.875033
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |        10           0          10     |
       ff_48 |        49           1          48     |
-----------------------------------------------------+

. estimates store m2

. preserve 

.         drop if sp_rating_num == 0
(1,921 observations deleted)

.         reghdfe sp_rating_num `treat_vars' `controls' `deal_controls', absorb(year ff_48) vce(cluster gvkey)
(MWFE estimator converged in 6 iterations)

HDFE Linear regression                            Number of obs   =      2,791
Absorbing 2 HDFE groups                           F(  21,    836) =     118.45
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.7555
                                                  Adj R-squared   =     0.7486
                                                  Within R-sq.    =     0.7121
Number of clusters (gvkey)   =        837         Root MSE        =     1.5449

                                             (Std. err. adjusted for 837 clusters in gvkey)
-------------------------------------------------------------------------------------------
                          |               Robust
            sp_rating_num | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |  -.9388545   .2473527    -3.80   0.000     -1.42436   -.4533491
             treated_post |   .3011527   .2978018     1.01   0.312    -.2833744    .8856798
             treated_loss |   -.642087   .2521851    -2.55   0.011    -1.137077   -.1470967
        treated_loss_post |   .3977811   .3541426     1.12   0.262    -.2973321    1.092894
                   log_at |   .8917084   .0697707    12.78   0.000     .7547621    1.028655
         cash_flows_by_at |   2.440349   1.184349     2.06   0.040     .1157021    4.764997
           market_to_book |   .4385714   .0801644     5.47   0.000     .2812242    .5959186
              ppent_by_at |  -.8801983   .3255809    -2.70   0.007     -1.51925   -.2411463
               debt_by_at |  -1.767626   .3342704    -5.29   0.000    -2.423733   -1.111518
               cash_by_at |  -1.008354   .6439231    -1.57   0.118     -2.27225    .2555418
             sales_growth |    -.44952   .1879457    -2.39   0.017    -.8184209   -.0806192
           dividend_payer |   .8962489   .1505512     5.95   0.000     .6007461    1.191752
                      nol |   -.439464   .1502123    -2.93   0.004    -.7343016   -.1446265
                  ret_vol |  -5.571164   1.106033    -5.04   0.000    -7.742091   -3.400237
                leveraged |  -1.538136   .1611122    -9.55   0.000    -1.854368   -1.221904
                 maturity |   .0745257   .0346927     2.15   0.032     .0064308    .1426207
log_deal_amount_converted |  -.2908792   .0606078    -4.80   0.000    -.4098405   -.1719178
            secured_dummy |  -.6840772   .1253412    -5.46   0.000    -.9300977   -.4380567
       tranche_type_dummy |   .0192219   .0582195     0.33   0.741    -.0950517    .1334955
        tranche_o_a_dummy |  -.0660185   .0865303    -0.76   0.446    -.2358607    .1038237
            sponsor_dummy |  -.0279182   .1607683    -0.17   0.862    -.3434751    .2876387
                    _cons |   7.463001   .6468148    11.54   0.000     6.193429    8.732572
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |        10           0          10     |
       ff_48 |        48           1          47     |
-----------------------------------------------------+

.         estimates store m1

. restore

. * save the results (esttab) using overleaf_dir
. esttab m1 m2 using "$overleaf_dir/sp_rating_robustness.tex", replace ///
> nodepvars nomti nonum collabels(none) label b(3) se(3) parentheses ///
> star(* 0.10 ** 0.05 *** 0.01) ar2 plain lines fragment noconstant keep(`treat_vars' `controls' `deal_controls')
(output written to /Users/zrsong/Dropbox (MIT)/Apps/Overleaf/M&A Debt/Tables/sp_rating_robustness.tex)

. est clear

. 
. save "../3. Data/Processed/tranche_level_ds_compa_wlabel.dta", replace
file ../3. Data/Processed/tranche_level_ds_compa_wlabel.dta saved

. 
. *** DID regressions (30% and Loss Rule: MAIN RESULT TABLE 1) ***
. 
. use "../3. Data/Processed/tranche_level_ds_compa_wlabel.dta", clear

. 
. gen treated_both = treated * treated_loss

. gen treated_both_post = treated_both * post

. 
. gen treated_eo = 1 if treated == 1 | treated_next_1yr == 1
(3,256 missing values generated)

. replace treated_eo = 0 if treated_eo == .
(3,256 real changes made)

. gen treated_loss_eo = 1 if treated_loss == 1 | treated_loss_next_1yr == 1
(3,194 missing values generated)

. replace treated_loss_eo = 0 if treated_loss_eo == .
(3,194 real changes made)

. 
. gen treated_eo_post = treated_eo * post

. gen treated_loss_eo_post = treated_loss_eo * post

. 
. local controls "log_at cash_flows_by_at market_to_book ppent_by_at debt_by_at cash_by_at sales_growth dividend_payer nol ret_vol"

. local deal_controls "leveraged maturity log_deal_amount_converted secured_dummy tranche_type_dummy tranche_o_a_dummy sponsor_dummy"

. local controls_post "log_at_post cash_flows_by_at_post market_to_book_post ppent_by_at_post debt_by_at_post cash_by_at_post sales_growth_post 
> dividend_payer_post nol_post ret_vol_post"

. 
. reghdfe margin_bps treated treated_post treated_loss treated_loss_post `controls' `deal_controls', absorb(year ff_48 sp_rating_num) vce(cluste
> r gvkey)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =      4,712
Absorbing 3 HDFE groups                           F(  21,   1518) =      72.29
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.5454
                                                  Adj R-squared   =     0.5359
                                                  Within R-sq.    =     0.3871
Number of clusters (gvkey)   =      1,519         Root MSE        =   121.3228

                                           (Std. err. adjusted for 1,519 clusters in gvkey)
-------------------------------------------------------------------------------------------
                          |               Robust
               margin_bps | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |   10.25475   12.75522     0.80   0.422    -14.76498    35.27448
             treated_post |   7.264098   15.85953     0.46   0.647    -23.84482    38.37302
             treated_loss |   43.01848   12.27935     3.50   0.000      18.9322    67.10476
        treated_loss_post |  -45.48211   15.87455    -2.87   0.004    -76.62048   -14.34374
                   log_at |  -5.239352   2.509111    -2.09   0.037    -10.16104   -.3176598
         cash_flows_by_at |  -172.7848   55.57297    -3.11   0.002    -281.7927   -63.77687
           market_to_book |   -1.58417   3.591835    -0.44   0.659    -8.629655    5.461315
              ppent_by_at |   22.03368   14.90374     1.48   0.140    -7.200422    51.26778
               debt_by_at |   42.99232   17.27709     2.49   0.013     9.102822    76.88181
               cash_by_at |   47.89352   24.56337     1.95   0.051    -.2882079    96.07525
             sales_growth |  -4.326255   11.23199    -0.39   0.700    -26.35811     17.7056
           dividend_payer |   6.608519    5.86542     1.13   0.260    -4.896666     18.1137
                      nol |  -5.891345   5.740148    -1.03   0.305    -17.15081    5.368115
                  ret_vol |   195.5756   54.06827     3.62   0.000     89.51916     301.632
                leveraged |    79.7596   8.240698     9.68   0.000     63.59525    95.92396
                 maturity |   8.390079   1.828005     4.59   0.000     4.804395    11.97576
log_deal_amount_converted |  -15.99383    2.70904    -5.90   0.000    -21.30768   -10.67997
            secured_dummy |   64.49048   6.762792     9.54   0.000     51.22507    77.75588
       tranche_type_dummy |   74.88968   4.235391    17.68   0.000     66.58185    83.19752
        tranche_o_a_dummy |   10.47932   5.751617     1.82   0.069    -.8026357    21.76128
            sponsor_dummy |   85.86738   8.828331     9.73   0.000     68.55036    103.1844
                    _cons |    186.869   26.98868     6.92   0.000     133.9299     239.808
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |        10           0          10     |
         ff_48 |        49           1          48     |
 sp_rating_num |        19           1          18    ?|
-------------------------------------------------------+
? = number of redundant parameters may be higher

. estimates store m1

. reghdfe margin_bps treated treated_post treated_loss treated_loss_post `controls' `controls_post' `deal_controls', absorb(year ff_48 sp_rating
> _num) vce(cluster gvkey)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =      4,712
Absorbing 3 HDFE groups                           F(  31,   1518) =      51.90
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.5488
                                                  Adj R-squared   =     0.5384
                                                  Within R-sq.    =     0.3917
Number of clusters (gvkey)   =      1,519         Root MSE        =   121.0018

                                           (Std. err. adjusted for 1,519 clusters in gvkey)
-------------------------------------------------------------------------------------------
                          |               Robust
               margin_bps | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |  -1.341297   13.93723    -0.10   0.923    -28.67957    25.99698
             treated_post |   27.27637   17.67753     1.54   0.123    -7.398605    61.95134
             treated_loss |   37.96139   12.62155     3.01   0.003     13.20388    62.71891
        treated_loss_post |  -36.24564   16.33857    -2.22   0.027     -68.2942   -4.197087
                   log_at |  -3.969259   3.155267    -1.26   0.209     -10.1584    2.219886
         cash_flows_by_at |  -328.7883   94.07713    -3.49   0.000    -513.3232   -144.2533
           market_to_book |   6.154644   7.664941     0.80   0.422    -8.880351    21.18964
              ppent_by_at |   25.79242   19.36187     1.33   0.183    -12.18643    63.77126
               debt_by_at |   64.02695   26.40467     2.42   0.015     12.23345    115.8205
               cash_by_at |   67.92616    38.4916     1.76   0.078    -7.576178    143.4285
             sales_growth |  -1.507185   16.93326    -0.09   0.929    -34.72225    31.70788
           dividend_payer |   13.45613    8.61834     1.56   0.119    -3.448985    30.36124
                      nol |   -10.5802   8.220299    -1.29   0.198    -26.70455    5.544146
                  ret_vol |    282.182   95.45367     2.96   0.003     94.94697    469.4171
              log_at_post |   -1.70434   3.219454    -0.53   0.597    -8.019389    4.610709
    cash_flows_by_at_post |   278.7788   119.7744     2.33   0.020     43.83801    513.7197
      market_to_book_post |  -12.83426   8.303134    -1.55   0.122    -29.12109    3.452573
         ppent_by_at_post |  -8.847532   21.00717    -0.42   0.674    -50.05368    32.35862
          debt_by_at_post |  -34.59666   29.98051    -1.15   0.249    -93.40426    24.21095
          cash_by_at_post |  -32.97505   49.05811    -0.67   0.502    -129.2039    63.25381
        sales_growth_post |  -9.826635   22.85326    -0.43   0.667    -54.65394    35.00067
      dividend_payer_post |  -12.86945   10.65938    -1.21   0.227    -33.77813    8.039227
                 nol_post |   7.237742   9.650776     0.75   0.453    -11.69252    26.16801
             ret_vol_post |  -145.1398   114.5594    -1.27   0.205    -369.8512    79.57157
                leveraged |   80.62346   7.877516    10.23   0.000     65.17149    96.07543
                 maturity |   8.485809   1.828866     4.64   0.000     4.898438    12.07318
log_deal_amount_converted |  -15.80891   2.739386    -5.77   0.000     -21.1823   -10.43553
            secured_dummy |   63.96366   6.589889     9.71   0.000     51.03741    76.88991
       tranche_type_dummy |   75.18409   4.259181    17.65   0.000     66.82958    83.53859
        tranche_o_a_dummy |   10.49973   5.625449     1.87   0.062    -.5347488     21.5342
            sponsor_dummy |   86.03095   8.819983     9.75   0.000      68.7303    103.3316
                    _cons |   182.5755   26.43764     6.91   0.000     130.7173    234.4337
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |        10           0          10     |
         ff_48 |        49           1          48     |
 sp_rating_num |        19           1          18    ?|
-------------------------------------------------------+
? = number of redundant parameters may be higher

. estimates store m2

. 
. * save the results (esttab) using overleaf_dir
. esttab m1 m2 using "$overleaf_dir/margin_did_both_rule.tex", replace ///
> nodepvars nomti nonum collabels(none) label b(3) se(3) parentheses ///
> star(* 0.10 ** 0.05 *** 0.01) ar2 plain lines fragment noconstant drop(_cons `controls_post')
(output written to /Users/zrsong/Dropbox (MIT)/Apps/Overleaf/M&A Debt/Tables/margin_did_both_rule.tex)

. est clear

. 
. *** robustness dropping 2021 (COVID)
. preserve

.         drop if year == 2021
(578 observations deleted)

.         reghdfe margin_bps treated treated_post treated_loss treated_loss_post `controls' `deal_controls', absorb(year ff_48 sp_rating_num) vc
> e(cluster gvkey)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =      4,134
Absorbing 3 HDFE groups                           F(  21,   1399) =      69.08
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.5502
                                                  Adj R-squared   =     0.5396
                                                  Within R-sq.    =     0.3925
Number of clusters (gvkey)   =      1,400         Root MSE        =   121.5287

                                           (Std. err. adjusted for 1,400 clusters in gvkey)
-------------------------------------------------------------------------------------------
                          |               Robust
               margin_bps | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |   1.663451   12.91166     0.13   0.898    -23.66485    26.99175
             treated_post |   8.537313   16.40444     0.52   0.603    -23.64265    40.71727
             treated_loss |   39.88023   12.26577     3.25   0.001     15.81894    63.94151
        treated_loss_post |  -40.42693   16.03785    -2.52   0.012    -71.88776   -8.966094
                   log_at |  -4.047571   2.643265    -1.53   0.126    -9.232762     1.13762
         cash_flows_by_at |  -204.7377   60.62424    -3.38   0.001    -323.6619   -85.81348
           market_to_book |  -1.270363   4.216271    -0.30   0.763    -9.541257    7.000531
              ppent_by_at |   16.88079   15.23098     1.11   0.268    -12.99724    46.75881
               debt_by_at |   52.96154   18.29874     2.89   0.004      17.0656    88.85747
               cash_by_at |   70.00705   27.28605     2.57   0.010     16.48107     123.533
             sales_growth |  -14.97105   12.20053    -1.23   0.220    -38.90436    8.962264
           dividend_payer |    7.70676   6.230745     1.24   0.216     -4.51585    19.92937
                      nol |  -6.021379   5.884966    -1.02   0.306    -17.56569     5.52293
                  ret_vol |   296.2256   68.93866     4.30   0.000     160.9913    431.4599
                leveraged |   78.81532   8.830916     8.92   0.000     61.49206    96.13858
                 maturity |   8.435949   1.962845     4.30   0.000     4.585512    12.28639
log_deal_amount_converted |  -15.69026   2.840022    -5.52   0.000    -21.26142   -10.11909
            secured_dummy |   63.27593   7.047139     8.98   0.000     49.45183    77.10003
       tranche_type_dummy |   77.65675   4.457103    17.42   0.000     68.91343    86.40008
        tranche_o_a_dummy |   11.89707   6.117569     1.94   0.052    -.1035235    23.89767
            sponsor_dummy |   94.66578   9.583403     9.88   0.000     75.86639    113.4652
                    _cons |   164.8288   28.65137     5.75   0.000     108.6245    221.0331
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |         9           0           9     |
         ff_48 |        49           1          48     |
 sp_rating_num |        19           1          18    ?|
-------------------------------------------------------+
? = number of redundant parameters may be higher

.         estimates store m1

.         reghdfe margin_bps treated treated_post treated_loss treated_loss_post `controls' `controls_post' `deal_controls', absorb(year ff_48 s
> p_rating_num) vce(cluster gvkey)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =      4,134
Absorbing 3 HDFE groups                           F(  31,   1399) =      49.08
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.5534
                                                  Adj R-squared   =     0.5417
                                                  Within R-sq.    =     0.3968
Number of clusters (gvkey)   =      1,400         Root MSE        =   121.2471

                                           (Std. err. adjusted for 1,400 clusters in gvkey)
-------------------------------------------------------------------------------------------
                          |               Robust
               margin_bps | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |  -2.845636   14.01559    -0.20   0.839    -30.33947     24.6482
             treated_post |   17.78491    17.9795     0.99   0.323    -17.48477    53.05459
             treated_loss |   38.36855   12.55817     3.06   0.002     13.73368    63.00341
        treated_loss_post |  -36.92711   16.95561    -2.18   0.030    -70.18827   -3.665943
                   log_at |  -4.070324   3.232849    -1.26   0.208    -10.41208     2.27143
         cash_flows_by_at |  -327.6149   95.38733    -3.43   0.001    -514.7325   -140.4973
           market_to_book |   6.108012   7.719044     0.79   0.429    -9.034137    21.25016
              ppent_by_at |   18.50911   19.68526     0.94   0.347     -20.1067    57.12491
               debt_by_at |   61.97655   26.87681     2.31   0.021      9.25335    114.6997
               cash_by_at |   70.40154    39.2091     1.80   0.073    -6.513425    147.3165
             sales_growth |   -3.28661   17.33315    -0.19   0.850    -37.28838    30.71516
           dividend_payer |   14.81658   8.691401     1.70   0.088       -2.233    31.86617
                      nol |  -10.87504   8.272603    -1.31   0.189    -27.10309    5.352999
                  ret_vol |   290.0882   96.04566     3.02   0.003     101.6791    478.4972
              log_at_post |   .1734154   3.242296     0.05   0.957     -6.18687    6.533701
    cash_flows_by_at_post |   255.3184   119.8142     2.13   0.033     20.28355    490.3532
      market_to_book_post |  -14.17648   8.363997    -1.69   0.090    -30.58381    2.230843
         ppent_by_at_post |  -5.440919   20.85999    -0.26   0.794    -46.36115    35.47931
          debt_by_at_post |   -12.6491   31.24487    -0.40   0.686    -73.94096    48.64275
          cash_by_at_post |   .7104271   53.13728     0.01   0.989    -103.5269    104.9478
        sales_growth_post |  -30.79463   23.97417    -1.28   0.199    -77.82383    16.23457
      dividend_payer_post |  -15.75421   11.05473    -1.43   0.154    -37.43984    5.931415
                 nol_post |   7.175517   9.750155     0.74   0.462    -11.95098    26.30202
             ret_vol_post |   -4.90308   128.6601    -0.04   0.970    -257.2906    247.4845
                leveraged |   79.28045   8.532432     9.29   0.000     62.54271    96.01819
                 maturity |   8.634269   1.956083     4.41   0.000     4.797096    12.47144
log_deal_amount_converted |  -15.47723   2.848695    -5.43   0.000     -21.0654   -9.889051
            secured_dummy |   62.53824    6.85172     9.13   0.000     49.09749      75.979
       tranche_type_dummy |   78.01252   4.467678    17.46   0.000     69.24845    86.77658
        tranche_o_a_dummy |    11.5414   6.038628     1.91   0.056    -.3043409    23.38714
            sponsor_dummy |   95.20692   9.578816     9.94   0.000     76.41653    113.9973
                    _cons |   163.6979   28.34459     5.78   0.000     108.0954    219.3003
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |         9           0           9     |
         ff_48 |        49           1          48     |
 sp_rating_num |        19           1          18    ?|
-------------------------------------------------------+
? = number of redundant parameters may be higher

.         estimates store m2

. restore

. 
. /********* 
>         DID regressions (30% and Loss Rule: ROBUSTNESS RESULT TABLE 2 and Appendix)
>         *********/
. * Firm FE 
. reghdfe margin_bps treated treated_post treated_loss treated_loss_post `controls' `deal_controls', absorb(year gvkey) vce(cluster gvkey)
(dropped 461 singleton observations)
(MWFE estimator converged in 9 iterations)

HDFE Linear regression                            Number of obs   =      4,251
Absorbing 2 HDFE groups                           F(  21,   1057) =      32.31
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.7691
                                                  Adj R-squared   =     0.6897
                                                  Within R-sq.    =     0.2845
Number of clusters (gvkey)   =      1,058         Root MSE        =    98.1087

                                           (Std. err. adjusted for 1,058 clusters in gvkey)
-------------------------------------------------------------------------------------------
                          |               Robust
               margin_bps | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |  -19.50259   16.24432    -1.20   0.230    -51.37737    12.37218
             treated_post |   27.93666   16.96738     1.65   0.100    -5.356909    61.23023
             treated_loss |   45.08471   14.23673     3.17   0.002     17.14924    73.02018
        treated_loss_post |  -43.50761   17.94664    -2.42   0.016     -78.7227   -8.292531
                   log_at |  -14.72263   9.126595    -1.61   0.107    -32.63093    3.185675
         cash_flows_by_at |  -45.97058   75.28623    -0.61   0.542     -193.698    101.7569
           market_to_book |  -11.99468   6.299165    -1.90   0.057    -24.35497    .3656079
              ppent_by_at |  -32.76913   58.32333    -0.56   0.574    -147.2118    81.67355
               debt_by_at |   128.2622    34.3079     3.74   0.000     60.94283    195.5815
               cash_by_at |  -68.73757   51.09278    -1.35   0.179    -168.9924    31.51724
             sales_growth |  -25.52245   14.95491    -1.71   0.088    -54.86714    3.822241
           dividend_payer |   12.69005   11.77758     1.08   0.282    -10.42005    35.80016
                      nol |   2.044123   12.84136     0.16   0.874    -23.15333    27.24158
                  ret_vol |   115.5544   85.10914     1.36   0.175     -51.4477    282.5564
                leveraged |   76.66495   9.499366     8.07   0.000     58.02519    95.30471
                 maturity |   9.837545   1.898627     5.18   0.000     6.112038    13.56305
log_deal_amount_converted |  -6.034993   3.503185    -1.72   0.085    -12.90898    .8389955
            secured_dummy |   45.52507   7.799657     5.84   0.000      30.2205    60.82964
       tranche_type_dummy |   58.81141   4.163833    14.12   0.000     50.64109    66.98173
        tranche_o_a_dummy |   8.792849   5.448609     1.61   0.107    -1.898471    19.48417
            sponsor_dummy |   100.4748   12.79121     7.85   0.000     75.37578    125.5739
                    _cons |   216.8941   87.13374     2.49   0.013     45.91928    387.8688
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |        10           1           9     |
       gvkey |      1058        1058           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

. estimates store m1

. reghdfe margin_bps treated treated_post treated_loss treated_loss_post `controls' `controls_post' `deal_controls', absorb(year gvkey) vce(clus
> ter gvkey)
(dropped 461 singleton observations)
(MWFE estimator converged in 9 iterations)

HDFE Linear regression                            Number of obs   =      4,251
Absorbing 2 HDFE groups                           F(  31,   1057) =      23.36
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.7698
                                                  Adj R-squared   =     0.6897
                                                  Within R-sq.    =     0.2869
Number of clusters (gvkey)   =      1,058         Root MSE        =    98.1024

                                           (Std. err. adjusted for 1,058 clusters in gvkey)
-------------------------------------------------------------------------------------------
                          |               Robust
               margin_bps | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |   -21.2972   17.28242    -1.23   0.218    -55.20895    12.61455
             treated_post |   30.65783   19.71678     1.55   0.120    -8.030656    69.34631
             treated_loss |    48.2906   15.12006     3.19   0.001     18.62185    77.95934
        treated_loss_post |  -48.88285   19.22934    -2.54   0.011    -86.61487   -11.15082
                   log_at |  -11.43359   9.887522    -1.16   0.248      -30.835    7.967808
         cash_flows_by_at |  -97.07036   109.3625    -0.89   0.375    -311.6627    117.5219
           market_to_book |  -6.339475   8.099091    -0.78   0.434     -22.2316    9.552649
              ppent_by_at |  -45.35053   58.54503    -0.77   0.439    -160.2282    69.52715
               debt_by_at |   129.2396   38.96656     3.32   0.001       52.779    205.7002
               cash_by_at |  -80.84604   64.48586    -1.25   0.210    -207.3809    45.68882
             sales_growth |  -31.49857    21.5558    -1.46   0.144     -73.7956    10.79847
           dividend_payer |   18.05903   12.92706     1.40   0.163    -7.306589    43.42464
                      nol |   1.317818   13.82281     0.10   0.924    -25.80545    28.44109
                  ret_vol |   179.0321   146.6681     1.22   0.222    -108.7616    466.8258
              log_at_post |  -7.538615   3.739385    -2.02   0.044    -14.87608   -.2011529
    cash_flows_by_at_post |   76.15512   132.0399     0.58   0.564     -182.935    335.2453
      market_to_book_post |  -9.606923   8.296202    -1.16   0.247    -25.88582    6.671975
         ppent_by_at_post |  -4.103915   25.84922    -0.16   0.874    -54.82554    46.61771
          debt_by_at_post |  -7.175634   35.08491    -0.20   0.838    -76.01963    61.66836
          cash_by_at_post |   16.62852   71.31473     0.23   0.816     -123.306    156.5631
        sales_growth_post |    6.01148    29.6217     0.20   0.839    -52.11255    64.13551
      dividend_payer_post |  -12.63168   14.15972    -0.89   0.373    -40.41604    15.15267
                 nol_post |  -1.057356   11.19942    -0.09   0.925    -23.03298    20.91827
             ret_vol_post |  -102.3119   157.6883    -0.65   0.517    -411.7297    207.1059
                leveraged |   76.14183   9.402523     8.10   0.000     57.69209    94.59156
                 maturity |   9.532795   1.900641     5.02   0.000     5.803336    13.26225
log_deal_amount_converted |  -6.007901   3.569825    -1.68   0.093    -13.01265    .9968497
            secured_dummy |   45.43868   7.776088     5.84   0.000     30.18035      60.697
       tranche_type_dummy |   58.72039   4.173944    14.07   0.000     50.53023    66.91054
        tranche_o_a_dummy |   8.467113   5.378684     1.57   0.116    -2.086999    19.02123
            sponsor_dummy |    99.2981    12.7744     7.77   0.000     74.23202    124.3642
                    _cons |   235.9536   89.43179     2.64   0.008     60.46955    411.4376
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |        10           1           9     |
       gvkey |      1058        1058           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

. estimates store m2

. * 3-year and 5-year look backs
. preserve  

.         /*drop treated treated_post treated_loss treated_loss_post
>         rename (treated_prev_3yr treated_prev_3yr_post treated_loss_prev_3yr treated_loss_prev_3yr_post) (treated treated_post treated_loss tr
> eated_loss_post)
>         reghdfe margin_bps treated treated_post treated_loss treated_loss_post `controls' `deal_controls', absorb(year ff_48 sp_rating_num) vc
> e(cluster gvkey)
>         estimates store m3
>         reghdfe margin_bps treated treated_post treated_loss treated_loss_post `controls' `controls_post' `deal_controls', absorb(year ff_48 s
> p_rating_num) vce(cluster gvkey)
>         estimates store m4*/
.         
.         drop treated treated_post treated_loss treated_loss_post

.         rename (treated_prev_5yr treated_prev_5yr_post treated_loss_prev_5yr treated_loss_prev_5yr_post) (treated treated_post treated_loss tr
> eated_loss_post)

.         reghdfe margin_bps treated treated_post treated_loss treated_loss_post `controls' `deal_controls', absorb(year ff_48 sp_rating_num) vc
> e(cluster gvkey)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =      4,712
Absorbing 3 HDFE groups                           F(  21,   1518) =      72.55
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.5457
                                                  Adj R-squared   =     0.5363
                                                  Within R-sq.    =     0.3876
Number of clusters (gvkey)   =      1,519         Root MSE        =   121.2774

                                           (Std. err. adjusted for 1,519 clusters in gvkey)
-------------------------------------------------------------------------------------------
                          |               Robust
               margin_bps | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |   16.94875   13.89951     1.22   0.223    -10.31552    44.21302
             treated_post |   7.487169   18.02789     0.42   0.678    -27.87503    42.84937
             treated_loss |   42.92212   14.29769     3.00   0.003     14.87679    70.96745
        treated_loss_post |  -43.55376    18.6404    -2.34   0.020    -80.11742   -6.990099
                   log_at |  -5.086929    2.50437    -2.03   0.042     -9.99932   -.1745375
         cash_flows_by_at |  -175.1266   52.20841    -3.35   0.001    -277.5348   -72.71829
           market_to_book |  -1.520006   3.558919    -0.43   0.669    -8.500926    5.460914
              ppent_by_at |   21.43373   14.85374     1.44   0.149    -7.702301    50.56976
               debt_by_at |   37.77811   17.13001     2.21   0.028     4.177109    71.37912
               cash_by_at |   48.27967   24.02516     2.01   0.045     1.153652    95.40569
             sales_growth |  -6.299068   11.11334    -0.57   0.571     -28.0982    15.50006
           dividend_payer |   8.082859   5.914268     1.37   0.172    -3.518143    19.68386
                      nol |  -6.421753   5.754843    -1.12   0.265    -17.71004    4.866532
                  ret_vol |    197.047   53.16577     3.71   0.000     92.76084    301.3331
                leveraged |   80.40661   8.295713     9.69   0.000     64.13434    96.67889
                 maturity |   8.479322    1.82427     4.65   0.000     4.900966    12.05768
log_deal_amount_converted |  -16.09433   2.704097    -5.95   0.000     -21.3985   -10.79017
            secured_dummy |   63.61293   6.746703     9.43   0.000     50.37908    76.84678
       tranche_type_dummy |   74.55916   4.238442    17.59   0.000     66.24534    82.87299
        tranche_o_a_dummy |   10.57746   5.760498     1.84   0.067    -.7219203    21.87683
            sponsor_dummy |   85.93186    8.83726     9.72   0.000     68.59733    103.2664
                    _cons |   187.6221   26.95869     6.96   0.000     134.7419    240.5023
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |        10           0          10     |
         ff_48 |        49           1          48     |
 sp_rating_num |        19           1          18    ?|
-------------------------------------------------------+
? = number of redundant parameters may be higher

.         estimates store m5

.         reghdfe margin_bps treated treated_post treated_loss treated_loss_post `controls' `controls_post' `deal_controls', absorb(year ff_48 s
> p_rating_num) vce(cluster gvkey)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =      4,712
Absorbing 3 HDFE groups                           F(  31,   1518) =      52.23
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.5490
                                                  Adj R-squared   =     0.5386
                                                  Within R-sq.    =     0.3920
Number of clusters (gvkey)   =      1,519         Root MSE        =   120.9741

                                           (Std. err. adjusted for 1,519 clusters in gvkey)
-------------------------------------------------------------------------------------------
                          |               Robust
               margin_bps | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |   6.260345   15.10269     0.41   0.679    -23.36399    35.88469
             treated_post |   24.37892   19.76514     1.23   0.218    -14.39095    63.14879
             treated_loss |   36.02559   14.53724     2.48   0.013     7.510378    64.54079
        treated_loss_post |  -32.58287   18.96723    -1.72   0.086    -69.78763    4.621881
                   log_at |  -4.079447   3.156868    -1.29   0.196    -10.27173    2.112838
         cash_flows_by_at |  -329.8861   89.45577    -3.69   0.000    -505.3561   -154.4161
           market_to_book |   6.025052   7.665676     0.79   0.432    -9.011385    21.06149
              ppent_by_at |   26.06374   19.34137     1.35   0.178    -11.87489    64.00236
               debt_by_at |   56.08198   26.68704     2.10   0.036     3.734592    108.4294
               cash_by_at |   67.66044   38.07709     1.78   0.076    -7.028825    142.3497
             sales_growth |  -2.721112     16.831    -0.16   0.872     -35.7356    30.29338
           dividend_payer |   14.45153   8.682045     1.66   0.096    -2.578546     31.4816
                      nol |  -10.41277   8.259524    -1.26   0.208    -26.61406    5.788514
                  ret_vol |   287.0107   95.67658     3.00   0.003     99.33841     474.683
              log_at_post |  -1.314133   3.211174    -0.41   0.682    -7.612942    4.984675
    cash_flows_by_at_post |   270.2583   113.5079     2.38   0.017      47.6093    492.9072
      market_to_book_post |  -12.47969   8.307322    -1.50   0.133    -28.77473    3.815354
         ppent_by_at_post |  -10.57462   20.90853    -0.51   0.613    -51.58729    30.43804
          debt_by_at_post |  -28.90581   29.92867    -0.97   0.334    -87.61173    29.80011
          cash_by_at_post |  -27.94842   48.19691    -0.58   0.562     -122.488    66.59117
        sales_growth_post |  -11.48204   22.71673    -0.51   0.613    -56.04155    33.07747
      dividend_payer_post |  -11.63625   10.82261    -1.08   0.282     -32.8651    9.592592
                 nol_post |   5.978397   9.709275     0.62   0.538    -13.06662    25.02341
             ret_vol_post |   -143.482   113.5185    -1.26   0.206    -366.1518    79.18778
                leveraged |   81.69615   7.873369    10.38   0.000     66.25231    97.13998
                 maturity |   8.520438   1.828343     4.66   0.000     4.934092    12.10678
log_deal_amount_converted |   -15.7526   2.743477    -5.74   0.000    -21.13401   -10.37119
            secured_dummy |   62.91137   6.571883     9.57   0.000     50.02044     75.8023
       tranche_type_dummy |   74.88488   4.259563    17.58   0.000     66.52963    83.24013
        tranche_o_a_dummy |   10.37883   5.625235     1.85   0.065    -.6552223    21.41289
            sponsor_dummy |   86.29077   8.812011     9.79   0.000     69.00577    103.5758
                    _cons |   182.5585   26.42456     6.91   0.000      130.726    234.3911
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |        10           0          10     |
         ff_48 |        49           1          48     |
 sp_rating_num |        19           1          18    ?|
-------------------------------------------------------+
? = number of redundant parameters may be higher

.         estimates store m6

. restore 

. 
. * save the results (esttab) using overleaf_dir
. esttab m1 m2 m5 m6 using "$overleaf_dir/margin_did_both_rule_robustness.tex", replace ///
> nodepvars nomti nonum collabels(none) label b(3) se(3) parentheses ///
> star(* 0.10 ** 0.05 *** 0.01) ar2 plain lines fragment noconstant keep(treated treated_post treated_loss treated_loss_post)
(output written to /Users/zrsong/Dropbox (MIT)/Apps/Overleaf/M&A Debt/Tables/margin_did_both_rule_robustness.tex)

. est clear

. 
. ****** Forward Looking Measures Table D4 
. 
. local treated_base "treated treated_post treated_loss treated_loss_post"

. local treated_next_1yr "treated_next_1yr treated_next_1yr_post treated_loss_next_1yr treated_loss_next_1yr_post"

. local treated_next_3yr "treated_next_3yr treated_next_3yr_post treated_loss_next_3yr treated_loss_next_3yr_post"

. local treated_next_5yr "treated_next_5yr treated_next_5yr_post treated_loss_next_5yr treated_loss_next_5yr_post"

. local treated_eo_all "treated_eo treated_eo_post treated_loss_eo treated_loss_eo_post"

. 
. preserve 

.         drop `treated_base'

.         rename (`treated_next_1yr') (`treated_base')

.         reghdfe margin_bps `treated_base' `controls' `deal_controls', absorb(year ff_48 sp_rating_num) vce(cluster gvkey) 
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =      4,712
Absorbing 3 HDFE groups                           F(  21,   1518) =      70.99
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.5468
                                                  Adj R-squared   =     0.5374
                                                  Within R-sq.    =     0.3891
Number of clusters (gvkey)   =      1,519         Root MSE        =   121.1303

                                           (Std. err. adjusted for 1,519 clusters in gvkey)
-------------------------------------------------------------------------------------------
                          |               Robust
               margin_bps | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |   37.06666   12.54963     2.95   0.003      12.4502    61.68311
             treated_post |  -9.341356    14.6979    -0.64   0.525    -38.17171      19.489
             treated_loss |    20.3341   11.13114     1.83   0.068    -1.499946    42.16815
        treated_loss_post |  -31.51124   14.10906    -2.23   0.026    -59.18656    -3.83593
                   log_at |  -4.722646    2.48383    -1.90   0.057    -9.594748    .1494557
         cash_flows_by_at |  -176.7531   53.84195    -3.28   0.001    -282.3655   -71.14058
           market_to_book |  -1.142982   3.543807    -0.32   0.747    -8.094259    5.808295
              ppent_by_at |   22.42904   14.84144     1.51   0.131    -6.682855    51.54093
               debt_by_at |   38.00356   17.09629     2.22   0.026     4.468715     71.5384
               cash_by_at |   48.61765   24.44576     1.99   0.047      .666604     96.5687
             sales_growth |   -4.95529   11.21998    -0.44   0.659     -26.9636    17.05302
           dividend_payer |   5.278159    5.85652     0.90   0.368    -6.209569    16.76589
                      nol |  -6.302334    5.71875    -1.10   0.271    -17.51982    4.915153
                  ret_vol |   226.7379   53.92706     4.20   0.000     120.9585    332.5174
                leveraged |   79.29829   8.314411     9.54   0.000     62.98934    95.60724
                 maturity |   8.204218    1.83272     4.48   0.000     4.609286    11.79915
log_deal_amount_converted |  -16.07018   2.716651    -5.92   0.000    -21.39897   -10.74139
            secured_dummy |   64.00211   6.731172     9.51   0.000     50.79873    77.20549
       tranche_type_dummy |    74.6733    4.21367    17.72   0.000     66.40807    82.93853
        tranche_o_a_dummy |    9.89623   5.712175     1.73   0.083    -1.308361    21.10082
            sponsor_dummy |   89.56004   8.840255    10.13   0.000     72.21963    106.9004
                    _cons |   182.1796    26.7637     6.81   0.000     129.6818    234.6773
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |        10           0          10     |
         ff_48 |        49           1          48     |
 sp_rating_num |        19           1          18    ?|
-------------------------------------------------------+
? = number of redundant parameters may be higher

.         estimates store m1

.         reghdfe margin_bps `treated_base' `controls' `controls_post' `deal_controls', absorb(year ff_48 sp_rating_num) vce(cluster gvkey)  
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =      4,712
Absorbing 3 HDFE groups                           F(  31,   1518) =      51.95
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.5500
                                                  Adj R-squared   =     0.5396
                                                  Within R-sq.    =     0.3933
Number of clusters (gvkey)   =      1,519         Root MSE        =   120.8404

                                           (Std. err. adjusted for 1,519 clusters in gvkey)
-------------------------------------------------------------------------------------------
                          |               Robust
               margin_bps | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |   31.73226   13.56011     2.34   0.019     5.133725     58.3308
             treated_post |  -.9031645   16.55764    -0.05   0.957    -33.38143     31.5751
             treated_loss |   17.30246   11.34083     1.53   0.127    -4.942899    39.54782
        treated_loss_post |  -26.26872    14.4991    -1.81   0.070    -54.70911    2.171674
                   log_at |  -3.497473   3.158178    -1.11   0.268    -9.692328    2.697383
         cash_flows_by_at |  -320.4233    89.2771    -3.59   0.000    -495.5429   -145.3038
           market_to_book |   6.591719   7.613741     0.87   0.387    -8.342847    21.52628
              ppent_by_at |   24.07842   19.35708     1.24   0.214    -13.89103    62.04787
               debt_by_at |     47.225   25.84802     1.83   0.068    -3.476614    97.92661
               cash_by_at |    64.2155   37.53735     1.71   0.087    -9.415065    137.8461
             sales_growth |  -3.880641   16.87527    -0.23   0.818    -36.98196    29.22068
           dividend_payer |   12.71838   8.640764     1.47   0.141    -4.230723    29.66748
                      nol |  -13.31864   8.250089    -1.61   0.107    -29.50142    2.864143
                  ret_vol |   304.1341   95.72471     3.18   0.002     116.3674    491.9008
              log_at_post |  -2.024572   3.227831    -0.63   0.531    -8.356054     4.30691
    cash_flows_by_at_post |   251.6503   114.6547     2.19   0.028     26.75184    476.5488
      market_to_book_post |  -12.90177   8.255858    -1.56   0.118    -29.09586    3.292327
         ppent_by_at_post |  -5.436348   20.95231    -0.26   0.795    -46.53488    35.66219
          debt_by_at_post |  -13.01234    30.1864    -0.43   0.666    -72.22381    46.19912
          cash_by_at_post |  -23.23528   48.65807    -0.48   0.633    -118.6794    72.20888
        sales_growth_post |  -6.547616    22.8331    -0.29   0.774    -51.33538    38.24014
      dividend_payer_post |  -14.18411   10.73376    -1.32   0.187    -35.23868    6.870449
                 nol_post |   12.06063   9.618657     1.25   0.210    -6.806637    30.92789
             ret_vol_post |  -127.9941   113.2245    -1.13   0.258    -350.0872    94.09895
                leveraged |   80.15381   7.937627    10.10   0.000     64.58393    95.72369
                 maturity |   8.166385   1.840288     4.44   0.000     4.556609    11.77616
log_deal_amount_converted |  -15.59483   2.747642    -5.68   0.000    -20.98441   -10.20525
            secured_dummy |   63.52224    6.56052     9.68   0.000      50.6536    76.39089
       tranche_type_dummy |   74.78395   4.241341    17.63   0.000     66.46445    83.10346
        tranche_o_a_dummy |   9.684332   5.600622     1.73   0.084    -1.301446    20.67011
            sponsor_dummy |   89.43584    8.82908    10.13   0.000     72.11735    106.7543
                    _cons |   178.7439   26.33542     6.79   0.000     127.0862    230.4015
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |        10           0          10     |
         ff_48 |        49           1          48     |
 sp_rating_num |        19           1          18    ?|
-------------------------------------------------------+
? = number of redundant parameters may be higher

.         estimates store m2

. 
.         /*
>         drop `treated_base'
>         rename (`treated_next_3yr') (`treated_base')
>         reghdfe margin_bps `treated_base' `controls' `deal_controls', absorb(year ff_48 sp_rating_num) vce(cluster gvkey) 
>         estimates store m3
>         reghdfe margin_bps `treated_base' `controls' `controls_post' `deal_controls', absorb(year ff_48 sp_rating_num) vce(cluster gvkey)  
>         estimates store m4
>         */
.         
.         drop `treated_base'

.         rename (`treated_next_5yr') (`treated_base')

.         reghdfe margin_bps `treated_base' `controls' `deal_controls', absorb(year ff_48 sp_rating_num) vce(cluster gvkey) 
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =      4,712
Absorbing 3 HDFE groups                           F(  21,   1518) =      70.47
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.5459
                                                  Adj R-squared   =     0.5364
                                                  Within R-sq.    =     0.3878
Number of clusters (gvkey)   =      1,519         Root MSE        =   121.2608

                                           (Std. err. adjusted for 1,519 clusters in gvkey)
-------------------------------------------------------------------------------------------
                          |               Robust
               margin_bps | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |   29.91962   13.28925     2.25   0.025     3.852393    55.98685
             treated_post |   5.511895    19.7653     0.28   0.780    -33.25829    44.28208
             treated_loss |   26.88181   13.08016     2.06   0.040     1.224718     52.5389
        treated_loss_post |  -47.40599   19.37567    -2.45   0.015     -85.4119   -9.400077
                   log_at |  -4.731867   2.511714    -1.88   0.060    -9.658665    .1949311
         cash_flows_by_at |   -195.964   51.42365    -3.81   0.000     -296.833   -95.09512
           market_to_book |   -1.48479    3.59004    -0.41   0.679    -8.526754    5.557173
              ppent_by_at |   24.79459   14.78169     1.68   0.094    -4.200111     53.7893
               debt_by_at |   43.55752    16.6848     2.61   0.009     10.82981    76.28523
               cash_by_at |    50.5989   23.83268     2.12   0.034     3.850425    97.34738
             sales_growth |  -5.963213   11.25424    -0.53   0.596    -28.03871    16.11229
           dividend_payer |   3.933186   5.882016     0.67   0.504    -7.604554    15.47093
                      nol |   -5.94715   5.680315    -1.05   0.295    -17.08925    5.194947
                  ret_vol |   216.3672   52.98993     4.08   0.000      112.426    320.3084
                leveraged |   80.11782   8.322607     9.63   0.000      63.7928    96.44285
                 maturity |   8.063919   1.835896     4.39   0.000     4.462758    11.66508
log_deal_amount_converted |  -16.50971   2.708377    -6.10   0.000    -21.82227   -11.19715
            secured_dummy |   63.30606   6.714929     9.43   0.000     50.13453    76.47758
       tranche_type_dummy |   74.73541   4.229723    17.67   0.000     66.43869    83.03213
        tranche_o_a_dummy |   10.72685   5.695245     1.88   0.060    -.4445354    21.89823
            sponsor_dummy |    89.1951   8.806698    10.13   0.000     71.92051    106.4697
                    _cons |   188.9077   26.88909     7.03   0.000      136.164    241.6514
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |        10           0          10     |
         ff_48 |        49           1          48     |
 sp_rating_num |        19           1          18    ?|
-------------------------------------------------------+
? = number of redundant parameters may be higher

.         estimates store m5

.         reghdfe margin_bps `treated_base' `controls' `controls_post' `deal_controls', absorb(year ff_48 sp_rating_num) vce(cluster gvkey)  
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =      4,712
Absorbing 3 HDFE groups                           F(  31,   1518) =      51.59
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.5492
                                                  Adj R-squared   =     0.5388
                                                  Within R-sq.    =     0.3922
Number of clusters (gvkey)   =      1,519         Root MSE        =   120.9491

                                           (Std. err. adjusted for 1,519 clusters in gvkey)
-------------------------------------------------------------------------------------------
                          |               Robust
               margin_bps | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |   23.02519   14.00683     1.64   0.100    -4.449597    50.49997
             treated_post |   17.26812   20.59415     0.84   0.402    -23.12789    57.66413
             treated_loss |   24.27615    13.2263     1.84   0.067    -1.667611     50.2199
        treated_loss_post |  -42.63648   19.41385    -2.20   0.028    -80.71729   -4.555679
                   log_at |  -3.576909   3.177671    -1.13   0.260    -9.809998    2.656181
         cash_flows_by_at |  -344.5797   85.51014    -4.03   0.000    -512.3103   -176.8492
           market_to_book |   6.606484   7.642202     0.86   0.387    -8.383909    21.59688
              ppent_by_at |   26.18955   19.22901     1.36   0.173     -11.5287     63.9078
               debt_by_at |   56.11836    25.1238     2.23   0.026     6.837326    105.3994
               cash_by_at |    65.0884   37.10058     1.75   0.080    -7.685424    137.8622
             sales_growth |  -6.109314   16.79788    -0.36   0.716    -39.05883     26.8402
           dividend_payer |   11.61665   8.595146     1.35   0.177    -5.242971    28.47627
                      nol |   -11.7534   8.267103    -1.42   0.155    -27.96955    4.462755
                  ret_vol |   293.9339   94.88215     3.10   0.002     107.8199    480.0479
              log_at_post |  -1.884149   3.231353    -0.58   0.560    -8.222537     4.45424
    cash_flows_by_at_post |   259.6983   109.3184     2.38   0.018     45.26722    474.1295
      market_to_book_post |    -13.611   8.247047    -1.65   0.099    -29.78781    2.565818
         ppent_by_at_post |  -5.080111   20.83426    -0.24   0.807    -45.94709    35.78687
          debt_by_at_post |  -18.54607   29.28887    -0.63   0.527      -75.997    38.90487
          cash_by_at_post |  -19.44336   47.34331    -0.41   0.681    -112.3086    73.42186
        sales_growth_post |  -4.577388   22.87122    -0.20   0.841    -49.43993    40.28516
      dividend_payer_post |   -14.7248   10.63989    -1.38   0.167    -35.59525    6.145643
                 nol_post |   9.798508   9.646414     1.02   0.310    -9.123203    28.72022
             ret_vol_post |  -126.7928   111.9724    -1.13   0.258    -346.4298    92.84427
                leveraged |   81.08992   7.917893    10.24   0.000     65.55875    96.62109
                 maturity |   8.038752    1.84213     4.36   0.000     4.425362    11.65214
log_deal_amount_converted |  -16.11113   2.736721    -5.89   0.000    -21.47929   -10.74298
            secured_dummy |   62.66171   6.557163     9.56   0.000     49.79965    75.52377
       tranche_type_dummy |   74.84964   4.254635    17.59   0.000     66.50406    83.19523
        tranche_o_a_dummy |   10.34058   5.571836     1.86   0.064    -.5887277     21.2699
            sponsor_dummy |   89.03358   8.785781    10.13   0.000     71.80002    106.2671
                    _cons |   186.0731   26.49588     7.02   0.000     134.1007    238.0455
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |        10           0          10     |
         ff_48 |        49           1          48     |
 sp_rating_num |        19           1          18    ?|
-------------------------------------------------------+
? = number of redundant parameters may be higher

.         estimates store m6

. restore

. 
. * save the results (esttab) using overleaf_dir
. esttab m1 m2 m5 m6 using "$overleaf_dir/margin_did_both_rule_robustness_forward.tex", replace ///
> nodepvars nomti nonum collabels(none) label b(3) se(3) parentheses ///
> star(* 0.10 ** 0.05 *** 0.01) ar2 plain lines fragment noconstant keep(treated treated_post treated_loss treated_loss_post)
(output written to /Users/zrsong/Dropbox (MIT)/Apps/Overleaf/M&A Debt/Tables/margin_did_both_rule_robustness_forward.tex)

. est clear

. 
. ****** Appendix Tabld D2
. 
. *** DID regressions (30% and Loss Rule: Treat X Covariates) ***
. reghdfe margin_bps treated treated_post treated_loss treated_loss_post `controls' `controls_post' `controls_treated' `controls_treated_loss' `
> deal_controls', absorb(year ff_48 sp_rating_num) vce(cluster gvkey)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =      4,712
Absorbing 3 HDFE groups                           F(  51,   1518) =      34.29
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.5578
                                                  Adj R-squared   =     0.5457
                                                  Within R-sq.    =     0.4039
Number of clusters (gvkey)   =      1,519         Root MSE        =   120.0462

                                               (Std. err. adjusted for 1,519 clusters in gvkey)
-----------------------------------------------------------------------------------------------
                              |               Robust
                   margin_bps | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
------------------------------+----------------------------------------------------------------
                      treated |   117.1371   63.26601     1.85   0.064     -6.96091    241.2352
                 treated_post |   30.25121   17.61209     1.72   0.086    -4.295392    64.79781
                 treated_loss |  -39.29432   58.60054    -0.67   0.503    -154.2409    75.65229
            treated_loss_post |   -35.7082   17.13409    -2.08   0.037     -69.3172   -2.099205
                       log_at |  -1.816266   3.109052    -0.58   0.559    -7.914759    4.282227
             cash_flows_by_at |  -222.5123   83.93997    -2.65   0.008    -387.1629   -57.86173
               market_to_book |   2.211733   7.138216     0.31   0.757    -11.79008    16.21354
                  ppent_by_at |   9.503411   19.63655     0.48   0.628    -29.01422    48.02105
                   debt_by_at |   44.93568   25.37544     1.77   0.077    -4.838965    94.71032
                   cash_by_at |   60.41544   36.05698     1.68   0.094    -10.31133    131.1422
                 sales_growth |   3.040965   16.84481     0.18   0.857     -30.0006    36.08253
               dividend_payer |   17.81197   8.569006     2.08   0.038     1.003621    34.62031
                          nol |  -8.249694   8.073995    -1.02   0.307    -24.08706    7.587674
                      ret_vol |   182.3709   100.7795     1.81   0.071    -15.31094    380.0527
                  log_at_post |  -.2296076   3.252259    -0.07   0.944    -6.609004    6.149789
        cash_flows_by_at_post |   333.0707   109.2193     3.05   0.002      118.834    547.3074
          market_to_book_post |  -12.61659   7.704131    -1.64   0.102    -27.72846    2.495274
             ppent_by_at_post |  -10.77123   20.52026    -0.52   0.600    -51.02228    29.47983
              debt_by_at_post |  -32.44743   29.74921    -1.09   0.276    -90.80134    25.90648
              cash_by_at_post |  -37.90388   47.66154    -0.80   0.427    -131.3933    55.58558
            sales_growth_post |  -6.310099   22.05326    -0.29   0.775    -49.56819    36.94799
          dividend_payer_post |  -12.77537   10.64858    -1.20   0.230    -33.66285    8.112114
                     nol_post |   7.227255   9.735997     0.74   0.458    -11.87018    26.32469
                 ret_vol_post |  -157.8478   113.4768    -1.39   0.164    -380.4357    64.74014
               log_at_treated |  -14.11711   6.188069    -2.28   0.023    -26.25518   -1.979038
     cash_flows_by_at_treated |  -204.8804   173.2288    -1.18   0.237    -544.6735    134.9126
       market_to_book_treated |  -38.30908   14.22358    -2.69   0.007    -66.20904   -10.40913
          ppent_by_at_treated |   23.21006   31.79585     0.73   0.466    -39.15838     85.5785
           debt_by_at_treated |   79.14916   40.63579     1.95   0.052    -.5590865    158.8574
           cash_by_at_treated |   38.57541   88.82852     0.43   0.664    -135.6642     212.815
         sales_growth_treated |   48.89951   25.74812     1.90   0.058     -1.60614    99.40517
       dividend_payer_treated |  -7.982399    17.0006    -0.47   0.639    -41.32955    25.36475
                  nol_treated |  -3.526423   19.00325    -0.19   0.853    -40.80183    33.74898
              ret_vol_treated |   36.56627   110.1477     0.33   0.740    -179.4915     252.624
          log_at_treated_loss |   6.741698   5.537152     1.22   0.224    -4.119581    17.60298
cash_flows_by_at_treated_loss |    -148.19   173.2763    -0.86   0.393    -488.0764    191.6964
  market_to_book_treated_loss |   37.90297   14.00794     2.71   0.007       10.426    65.37994
     ppent_by_at_treated_loss |   21.40561   34.91516     0.61   0.540    -47.08146    89.89268
      debt_by_at_treated_loss |  -23.12383    44.0315    -0.53   0.600    -109.4929     63.2452
      cash_by_at_treated_loss |   -54.7947   82.09227    -0.67   0.505     -215.821    106.2316
    sales_growth_treated_loss |  -62.12492   26.64046    -2.33   0.020    -114.3809   -9.868907
  dividend_payer_treated_loss |  -16.04213   17.12487    -0.94   0.349    -49.63305    17.54878
             nol_treated_loss |  -11.09546    19.2106    -0.58   0.564    -48.77759    26.58667
         ret_vol_treated_loss |    90.6171   110.0326     0.82   0.410    -125.2149    306.4491
                    leveraged |   83.76811   7.745271    10.82   0.000     68.57555    98.96068
                     maturity |   9.452869    1.80878     5.23   0.000     5.904897    13.00084
    log_deal_amount_converted |  -16.55892   2.680302    -6.18   0.000    -21.81641   -11.30143
                secured_dummy |   61.43668   6.466447     9.50   0.000     48.75256    74.12079
           tranche_type_dummy |   73.99233    4.21613    17.55   0.000     65.72227    82.26239
            tranche_o_a_dummy |   9.268972   5.554977     1.67   0.095    -1.627271    20.16522
                sponsor_dummy |   87.89638   8.717706    10.08   0.000     70.79636    104.9964
                        _cons |   168.2057   26.09532     6.45   0.000      117.019    219.3924
-----------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |        10           0          10     |
         ff_48 |        49           1          48     |
 sp_rating_num |        19           1          18    ?|
-------------------------------------------------------+
? = number of redundant parameters may be higher

. estimates store m1

. *reghdfe log_margin_bps treated treated_post treated_loss treated_loss_post `controls' `controls_post' `controls_treated' `controls_treated_lo
> ss' `deal_controls', absorb(year ff_48 sp_rating_num) vce(cluster gvkey)
. *estimates store m2
. 
. *** DID regressions (30% and Loss Rule: ROBUSTNESS E-balancing) ***
. 
. use "../3. Data/Processed/tranche_level_ds_compa_wlabel.dta", clear

. 
. gen control = 0 

. replace control = 1 if treated == 0 & treated_loss == 0
(3,219 real changes made)

. 
. gen treated_one = 1 if treated == 1 & treated_loss == 0
(4,329 missing values generated)

. replace treated_one = 0 if treated_one == .
(4,329 real changes made)

. gen treated_one_post = treated_one * post

. 
. gen treated_two = 1 if treated == 0 & treated_loss == 1
(4,332 missing values generated)

. replace treated_two = 0 if treated_two == .
(4,332 real changes made)

. gen treated_two_post = treated_two * post

.  
. gen treated_three = 1 if treated == 1 & treated_loss == 1
(3,982 missing values generated)

. replace treated_three = 0 if treated_three == .
(3,982 real changes made)

. gen treated_three_post = treated_three * post

. 
. local controls "log_at cash_flows_by_at market_to_book ppent_by_at debt_by_at cash_by_at sales_growth dividend_payer nol ret_vol"

. local deal_controls "leveraged maturity log_deal_amount_converted secured_dummy tranche_type_dummy tranche_o_a_dummy sponsor_dummy"

. local treated_bi "treated_one treated_one_post treated_two treated_two_post treated_three treated_three_post"

. 
. reghdfe margin_bps `treated_bi' `controls' `deal_controls', absorb(year ff_48 sp_rating_num) vce(cluster gvkey)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =      4,712
Absorbing 3 HDFE groups                           F(  23,   1518) =      65.95
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.5460
                                                  Adj R-squared   =     0.5363
                                                  Within R-sq.    =     0.3879
Number of clusters (gvkey)   =      1,519         Root MSE        =   121.2741

                                           (Std. err. adjusted for 1,519 clusters in gvkey)
-------------------------------------------------------------------------------------------
                          |               Robust
               margin_bps | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
              treated_one |  -2.829914   14.93729    -0.19   0.850    -32.12982    26.46999
         treated_one_post |   22.49479   19.68769     1.14   0.253    -16.12316    61.11274
              treated_two |   25.13721   15.05912     1.67   0.095    -4.401673    54.67609
         treated_two_post |  -25.95048   19.06208    -1.36   0.174    -63.34127    11.44032
            treated_three |   59.78847   15.91396     3.76   0.000     28.57279    91.00416
       treated_three_post |  -45.74056   18.84699    -2.43   0.015    -82.70947   -8.771656
                   log_at |  -5.314138   2.504618    -2.12   0.034    -10.22702   -.4012596
         cash_flows_by_at |  -171.3312     55.126    -3.11   0.002    -279.4624   -63.19998
           market_to_book |  -1.818399   3.579289    -0.51   0.612    -8.839274    5.202477
              ppent_by_at |   20.82821   14.86074     1.40   0.161    -8.321544    49.97797
               debt_by_at |   43.49386   17.18102     2.53   0.011     9.792807    77.19492
               cash_by_at |   47.96515   24.53076     1.96   0.051    -.1526204    96.08293
             sales_growth |  -4.957603   11.27572    -0.44   0.660    -27.07525    17.16004
           dividend_payer |   6.338244    5.84286     1.08   0.278    -5.122689    17.79918
                      nol |  -5.860743   5.726025    -1.02   0.306     -17.0925    5.371016
                  ret_vol |   195.7579   53.96535     3.63   0.000     89.90335    301.6124
                leveraged |   79.99728   8.219687     9.73   0.000     63.87413    96.12042
                 maturity |   8.405521   1.819937     4.62   0.000     4.835663    11.97538
log_deal_amount_converted |  -15.90864   2.685071    -5.92   0.000    -21.17548   -10.64179
            secured_dummy |   64.52009   6.743289     9.57   0.000     51.29294    77.74724
       tranche_type_dummy |   74.81914   4.230466    17.69   0.000     66.52096    83.11732
        tranche_o_a_dummy |    10.5121   5.743945     1.83   0.067     -.754805    21.77901
            sponsor_dummy |   86.13941   8.762619     9.83   0.000     68.95129    103.3275
                    _cons |   187.8933   26.90696     6.98   0.000     135.1145     240.672
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |        10           0          10     |
         ff_48 |        49           1          48     |
 sp_rating_num |        19           1          18    ?|
-------------------------------------------------------+
? = number of redundant parameters may be higher

. 
. ******
. 
. gen treated_all = 1 if treated == 1 | treated_loss == 1
(3,219 missing values generated)

. replace treated_all = 0 if treated_all == .
(3,219 real changes made)

. 
. local controls "log_at cash_flows_by_at market_to_book ppent_by_at debt_by_at cash_by_at sales_growth dividend_payer nol ret_vol"

. local deal_controls "leveraged maturity log_deal_amount_converted secured_dummy tranche_type_dummy tranche_o_a_dummy sponsor_dummy"

. 
. ebalance treated_all `controls'


Data Setup
Treatment variable:   treated_all
Covariate adjustment: log_at cash_flows_by_at market_to_book ppent_by_at debt_by_at cash_by_at sales_growth dividend_payer nol ret_vol 

Optimizing...
Iteration 1: Max Difference = 27317.3546
Iteration 2: Max Difference = 10047.4273
Iteration 3: Max Difference = 3694.18036
Iteration 4: Max Difference = 1356.9632
Iteration 5: Max Difference = 497.180789
Iteration 6: Max Difference = 180.969343
Iteration 7: Max Difference = 64.8616148
Iteration 8: Max Difference = 22.6673592
Iteration 9: Max Difference = 7.98029869
Iteration 10: Max Difference = 2.77231337
Iteration 11: Max Difference = .828466358
Iteration 12: Max Difference = .120745049
Iteration 13: Max Difference = .002658243
maximum difference smaller than the tolerance level; convergence achieved


Treated units: 1493    total of weights: 1493
Control units: 3219    total of weights: 1493


Before: without weighting

             |              Treat              |             Control             
             |      mean   variance   skewness |      mean   variance   skewness 
-------------+---------------------------------+--------------------------------
      log_at |     7.828      3.125      .2074 |     8.489      2.722     .04661 
cash_flow~at |    .03601    .006438     -1.467 |     .1028    .003718      .3812 
market_to_~k |     1.364      1.408      3.353 |     1.729      1.414      2.411 
 ppent_by_at |     .3319     .08527      .6104 |     .2687     .05844      1.077 
  debt_by_at |     .4544      .0563      .2455 |     .3202     .03026      .5719 
  cash_by_at |     .1129     .01938      2.204 |     .1038     .01273      2.011 
sales_growth |    .09632      .1379       .694 |     .1076     .04426      1.859 
dividend_p~r |     .3362      .2233      .6933 |     .6434      .2295     -.5986 
         nol |     .7428      .1912     -1.111 |     .6645       .223     -.6968 
     ret_vol |     .1532    .008228      1.217 |    .08794    .002262      2.558 


After:  _webal as the weighting variable

             |              Treat              |             Control             
             |      mean   variance   skewness |      mean   variance   skewness 
-------------+---------------------------------+--------------------------------
      log_at |     7.828      3.125      .2074 |     7.828      2.333      -.136 
cash_flow~at |    .03601    .006438     -1.467 |    .03602     .01117     -1.202 
market_to_~k |     1.364      1.408      3.353 |     1.365      .9615      2.861 
 ppent_by_at |     .3319     .08527      .6104 |     .3319     .07973      .6643 
  debt_by_at |     .4544      .0563      .2455 |     .4544     .05091        .41 
  cash_by_at |     .1129     .01938      2.204 |     .1129     .01474      1.746 
sales_growth |    .09632      .1379       .694 |    .09632     .04796      1.808 
dividend_p~r |     .3362      .2233      .6933 |     .3363      .2233       .693 
         nol |     .7428      .1912     -1.111 |     .7428      .1911     -1.111 
     ret_vol |     .1532    .008228      1.217 |     .1532     .01093      1.221 

. 
. reghdfe margin_bps treated treated_post treated_loss treated_loss_post `controls' `deal_controls' [pweight=_webal], absorb(year ff_48 sp_ratin
> g_num) vce(cluster gvkey)
(MWFE estimator converged in 8 iterations)

HDFE Linear regression                            Number of obs   =      4,712
Absorbing 3 HDFE groups                           F(  21,   1518) =      33.61
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.4990
                                                  Adj R-squared   =     0.4885
                                                  Within R-sq.    =     0.3103
Number of clusters (gvkey)   =      1,519         Root MSE        =   136.5413

                                           (Std. err. adjusted for 1,519 clusters in gvkey)
-------------------------------------------------------------------------------------------
                          |               Robust
               margin_bps | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |   1.488767   14.35359     0.10   0.917    -26.66619    29.64373
             treated_post |   26.05094   17.75974     1.47   0.143    -8.785276    60.88716
             treated_loss |   51.71784   13.56718     3.81   0.000     25.10545    78.33024
        treated_loss_post |  -34.34317   17.15437    -2.00   0.045    -67.99195   -.6943943
                   log_at |  -12.50878   4.259344    -2.94   0.003     -20.8636   -4.153959
         cash_flows_by_at |  -159.0352   67.27751    -2.36   0.018    -291.0019   -27.06849
           market_to_book |  -12.43997   6.064338    -2.05   0.040    -24.33534    -.544602
              ppent_by_at |   28.79234   22.69348     1.27   0.205    -15.72156    73.30623
               debt_by_at |   87.63819   24.23591     3.62   0.000     40.09878    135.1776
               cash_by_at |   42.24857   37.56544     1.12   0.261    -31.43709    115.9342
             sales_growth |   2.396178     14.126     0.17   0.865    -25.31236    30.10472
           dividend_payer |  -8.470209   9.445558    -0.90   0.370    -26.99793    10.05752
                      nol |  -1.548764   10.49244    -0.15   0.883    -22.12998    19.03245
                  ret_vol |   92.43055   66.20061     1.40   0.163    -37.42381    222.2849
                leveraged |   52.60774   15.12123     3.48   0.001     22.94703    82.26845
                 maturity |    2.01025   4.109118     0.49   0.625      -6.0499     10.0704
log_deal_amount_converted |  -8.611235   5.084693    -1.69   0.091      -18.585    1.362533
            secured_dummy |   66.16486   11.29124     5.86   0.000     44.01679    88.31294
       tranche_type_dummy |   116.3199    8.46977    13.73   0.000     99.70619    132.9336
        tranche_o_a_dummy |    32.2864   11.50924     2.81   0.005     9.710711    54.86209
            sponsor_dummy |   61.44887   11.99749     5.12   0.000     37.91546    84.98227
                    _cons |   216.0918   47.04758     4.59   0.000     123.8066    308.3769
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |        10           0          10     |
         ff_48 |        49           1          48     |
 sp_rating_num |        19           1          18    ?|
-------------------------------------------------------+
? = number of redundant parameters may be higher

. estimates store m3

. *reghdfe log_margin_bps treated treated_post treated_loss treated_loss_post `controls' `deal_controls' [pweight=_webal], absorb(year ff_48 sp_
> rating_num) vce(cluster gvkey)
. *estimates store m4
. 
. * save the results (esttab) using overleaf_dir
. esttab m1 m3 using "$overleaf_dir/margin_did_both_rule_robustness_2.tex", replace ///
> nodepvars nomti nonum collabels(none) label b(3) se(3) parentheses ///
> star(* 0.10 ** 0.05 *** 0.01) ar2 plain lines fragment noconstant keep(treated treated_post treated_loss treated_loss_post)
(output written to /Users/zrsong/Dropbox (MIT)/Apps/Overleaf/M&A Debt/Tables/margin_did_both_rule_robustness_2.tex)

. est clear

. 
. *** Appendix Table: Log Margin results with prev_3yr and prev_5yr definitions
. * Appendix Table D1: Logged Margin
. reghdfe log_margin_bps treated treated_post treated_loss treated_loss_post `controls' `deal_controls', absorb(year ff_48 sp_rating_num) vce(cl
> uster gvkey)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =      4,712
Absorbing 3 HDFE groups                           F(  21,   1518) =     118.42
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.6830
                                                  Adj R-squared   =     0.6764
                                                  Within R-sq.    =     0.5143
Number of clusters (gvkey)   =      1,519         Root MSE        =     0.3524

                                           (Std. err. adjusted for 1,519 clusters in gvkey)
-------------------------------------------------------------------------------------------
                          |               Robust
           log_margin_bps | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |   .0220142   .0372572     0.59   0.555    -.0510668    .0950953
             treated_post |   .0579717   .0449167     1.29   0.197    -.0301336    .1460771
             treated_loss |   .1101575   .0333404     3.30   0.001     .0447594    .1755557
        treated_loss_post |  -.1084434   .0436686    -2.48   0.013    -.1941007   -.0227862
                   log_at |  -.0282896   .0077736    -3.64   0.000    -.0435378   -.0130415
         cash_flows_by_at |  -.4443466   .1571295    -2.83   0.005    -.7525606   -.1361327
           market_to_book |  -.0254281   .0113672    -2.24   0.025    -.0477252    -.003131
              ppent_by_at |   .0604925   .0439707     1.38   0.169    -.0257572    .1467422
               debt_by_at |   .1407406   .0489879     2.87   0.004     .0446495    .2368318
               cash_by_at |   .1902467   .0730963     2.60   0.009     .0468663    .3336271
             sales_growth |   .0107644   .0315156     0.34   0.733    -.0510542    .0725831
           dividend_payer |   .0194398   .0176189     1.10   0.270    -.0151202    .0539998
                      nol |  -.0089866   .0175184    -0.51   0.608    -.0433494    .0253761
                  ret_vol |   .5602969   .1548746     3.62   0.000      .256506    .8640878
                leveraged |   .4681928   .0262416    17.84   0.000     .4167192    .5196665
                 maturity |   .0394053   .0053514     7.36   0.000     .0289084    .0499022
log_deal_amount_converted |  -.0448818   .0084527    -5.31   0.000     -.061462   -.0283016
            secured_dummy |   .1849132   .0203501     9.09   0.000     .1449959    .2248305
       tranche_type_dummy |   .2097207   .0126312    16.60   0.000     .1849443    .2344971
        tranche_o_a_dummy |   .0205374   .0170724     1.20   0.229    -.0129505    .0540253
            sponsor_dummy |   .2691435   .0256679    10.49   0.000     .2187952    .3194918
                    _cons |   5.047354   .0823775    61.27   0.000     4.885768     5.20894
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |        10           0          10     |
         ff_48 |        49           1          48     |
 sp_rating_num |        19           1          18    ?|
-------------------------------------------------------+
? = number of redundant parameters may be higher

. estimates store m1

. reghdfe log_margin_bps treated treated_post treated_loss treated_loss_post `controls' `controls_post' `deal_controls', absorb(year ff_48 sp_ra
> ting_num) vce(cluster gvkey)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =      4,712
Absorbing 3 HDFE groups                           F(  31,   1518) =      86.46
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.6857
                                                  Adj R-squared   =     0.6785
                                                  Within R-sq.    =     0.5184
Number of clusters (gvkey)   =      1,519         Root MSE        =     0.3513

                                           (Std. err. adjusted for 1,519 clusters in gvkey)
-------------------------------------------------------------------------------------------
                          |               Robust
           log_margin_bps | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |  -.0092301   .0410332    -0.22   0.822    -.0897177    .0712576
             treated_post |   .1112019   .0510286     2.18   0.029      .011108    .2112959
             treated_loss |   .1032463   .0343043     3.01   0.003     .0359576    .1705351
        treated_loss_post |  -.0941978    .045598    -2.07   0.039    -.1836396    -.004756
                   log_at |   -.019338   .0098266    -1.97   0.049    -.0386132   -.0000628
         cash_flows_by_at |  -.8740509   .2605594    -3.35   0.001    -1.385145   -.3629564
           market_to_book |  -.0044746   .0245076    -0.18   0.855    -.0525469    .0435978
              ppent_by_at |   .0547796   .0569361     0.96   0.336    -.0569022    .1664613
               debt_by_at |   .2118887   .0729432     2.90   0.004     .0688086    .3549688
               cash_by_at |   .2559508   .1103129     2.32   0.020      .039569    .4723325
             sales_growth |   .0352177   .0475677     0.74   0.459    -.0580877    .1285231
           dividend_payer |   .0408859   .0249909     1.64   0.102    -.0081345    .0899063
                      nol |  -.0287097   .0240596    -1.19   0.233    -.0759033    .0184839
                  ret_vol |   .7576707    .263372     2.88   0.004     .2410592    1.274282
              log_at_post |  -.0146018   .0101511    -1.44   0.151    -.0345134    .0053099
    cash_flows_by_at_post |   .7797425   .3234083     2.41   0.016      .145368    1.414117
      market_to_book_post |  -.0340779   .0261452    -1.30   0.193    -.0853625    .0172067
         ppent_by_at_post |   .0014481   .0620108     0.02   0.981    -.1201878     .123084
          debt_by_at_post |  -.1184364   .0846573    -1.40   0.162    -.2844941    .0476212
          cash_by_at_post |  -.1138575   .1434789    -0.79   0.428    -.3952953    .1675803
        sales_growth_post |  -.0603789   .0647069    -0.93   0.351    -.1873032    .0665454
      dividend_payer_post |  -.0390052   .0318469    -1.22   0.221    -.1014739    .0234634
                 nol_post |   .0305574   .0292046     1.05   0.296    -.0267283     .087843
             ret_vol_post |  -.3327278   .3135809    -1.06   0.289    -.9478255    .2823699
                leveraged |   .4688451   .0254817    18.40   0.000     .4188621    .5188282
                 maturity |   .0391935   .0053267     7.36   0.000     .0287449     .049642
log_deal_amount_converted |  -.0444527   .0085128    -5.22   0.000    -.0611508   -.0277545
            secured_dummy |   .1855282   .0198641     9.34   0.000     .1465641    .2244922
       tranche_type_dummy |   .2105503   .0126451    16.65   0.000     .1857466    .2353539
        tranche_o_a_dummy |   .0211569   .0166741     1.27   0.205    -.0115498    .0538636
            sponsor_dummy |   .2688776   .0256996    10.46   0.000     .2184671    .3192882
                    _cons |   5.039729   .0819568    61.49   0.000     4.878968    5.200489
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |        10           0          10     |
         ff_48 |        49           1          48     |
 sp_rating_num |        19           1          18    ?|
-------------------------------------------------------+
? = number of redundant parameters may be higher

. estimates store m2

. preserve

.         /*drop treated treated_post treated_loss treated_loss_post
>         rename (treated_prev_3yr treated_prev_3yr_post treated_loss_prev_3yr treated_loss_prev_3yr_post) (treated treated_post treated_loss tr
> eated_loss_post)
>         reghdfe log_margin_bps treated treated_post treated_loss treated_loss_post `controls' `deal_controls', absorb(year ff_48 sp_rating_num
> ) vce(cluster gvkey)
>         estimates store m3
>         reghdfe log_margin_bps treated treated_post treated_loss treated_loss_post `controls' `controls_post' `deal_controls', absorb(year ff_
> 48 sp_rating_num) vce(cluster gvkey)
>         estimates store m4 */
.         
.         drop treated treated_post treated_loss treated_loss_post

.         rename (treated_prev_5yr treated_prev_5yr_post treated_loss_prev_5yr treated_loss_prev_5yr_post) (treated treated_post treated_loss tr
> eated_loss_post)

.         reghdfe log_margin_bps treated treated_post treated_loss treated_loss_post `controls' `deal_controls', absorb(year ff_48 sp_rating_num
> ) vce(cluster gvkey)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =      4,712
Absorbing 3 HDFE groups                           F(  21,   1518) =     118.07
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.6827
                                                  Adj R-squared   =     0.6761
                                                  Within R-sq.    =     0.5138
Number of clusters (gvkey)   =      1,519         Root MSE        =     0.3526

                                           (Std. err. adjusted for 1,519 clusters in gvkey)
-------------------------------------------------------------------------------------------
                          |               Robust
           log_margin_bps | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |   .0359134   .0403697     0.89   0.374    -.0432729    .1150997
             treated_post |    .045868    .050157     0.91   0.361    -.0525163    .1442523
             treated_loss |   .1005485   .0384062     2.62   0.009     .0252136    .1758834
        treated_loss_post |  -.1004158   .0511358    -1.96   0.050    -.2007201   -.0001115
                   log_at |  -.0277598   .0077576    -3.58   0.000    -.0429764   -.0125431
         cash_flows_by_at |  -.4865206   .1485576    -3.27   0.001    -.7779205   -.1951206
           market_to_book |  -.0251249   .0113504    -2.21   0.027    -.0473891   -.0028607
              ppent_by_at |   .0601948   .0438414     1.37   0.170    -.0258014     .146191
               debt_by_at |   .1345948   .0483826     2.78   0.005     .0396909    .2294986
               cash_by_at |   .2010857   .0717257     2.80   0.005     .0603938    .3417776
             sales_growth |   .0043037   .0312893     0.14   0.891    -.0570711    .0656785
           dividend_payer |   .0228944   .0178074     1.29   0.199    -.0120354    .0578241
                      nol |  -.0102271   .0175391    -0.58   0.560    -.0446306    .0241764
                  ret_vol |   .5928923   .1547552     3.83   0.000     .2893357     .896449
                leveraged |   .4717247   .0263756    17.88   0.000     .4199883    .5234612
                 maturity |   .0394352   .0053552     7.36   0.000     .0289308    .0499397
log_deal_amount_converted |  -.0453116   .0084358    -5.37   0.000    -.0618587   -.0287646
            secured_dummy |   .1822493   .0203137     8.97   0.000     .1424034    .2220953
       tranche_type_dummy |   .2085244   .0126531    16.48   0.000      .183705    .2333438
        tranche_o_a_dummy |   .0200497   .0171213     1.17   0.242    -.0135343    .0536337
            sponsor_dummy |   .2697348   .0256953    10.50   0.000     .2193328    .3201368
                    _cons |    5.05033   .0822473    61.40   0.000        4.889     5.21166
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |        10           0          10     |
         ff_48 |        49           1          48     |
 sp_rating_num |        19           1          18    ?|
-------------------------------------------------------+
? = number of redundant parameters may be higher

.         estimates store m5

.         reghdfe log_margin_bps treated treated_post treated_loss treated_loss_post `controls' `controls_post' `deal_controls', absorb(year ff_
> 48 sp_rating_num) vce(cluster gvkey)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =      4,712
Absorbing 3 HDFE groups                           F(  31,   1518) =      86.04
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.6850
                                                  Adj R-squared   =     0.6778
                                                  Within R-sq.    =     0.5173
Number of clusters (gvkey)   =      1,519         Root MSE        =     0.3517

                                           (Std. err. adjusted for 1,519 clusters in gvkey)
-------------------------------------------------------------------------------------------
                          |               Robust
           log_margin_bps | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |   .0079318   .0440645     0.18   0.857    -.0785019    .0943656
             treated_post |    .086086   .0554874     1.55   0.121    -.0227541    .1949261
             treated_loss |   .0922307   .0389821     2.37   0.018     .0157662    .1686952
        treated_loss_post |  -.0874065   .0526699    -1.66   0.097    -.1907199     .015907
                   log_at |  -.0193264   .0098423    -1.96   0.050    -.0386324   -.0000204
         cash_flows_by_at |  -.8854652   .2482706    -3.57   0.000    -1.372455   -.3984755
           market_to_book |  -.0044264   .0245037    -0.18   0.857    -.0524912    .0436384
              ppent_by_at |   .0557355   .0566868     0.98   0.326    -.0554573    .1669283
               debt_by_at |   .1924971   .0732801     2.63   0.009     .0487562    .3362379
               cash_by_at |   .2563187   .1094237     2.34   0.019      .041681    .4709563
             sales_growth |   .0321602   .0476054     0.68   0.499    -.0612191    .1255394
           dividend_payer |   .0431721   .0251121     1.72   0.086     -.006086    .0924302
                      nol |  -.0280924   .0241339    -1.16   0.245    -.0754317     .019247
                  ret_vol |   .7760889   .2667401     2.91   0.004     .2528707    1.299307
              log_at_post |  -.0139509   .0101559    -1.37   0.170     -.033872    .0059702
    cash_flows_by_at_post |   .7054226   .3069531     2.30   0.022     .1033254     1.30752
      market_to_book_post |  -.0335188     .02615    -1.28   0.200    -.0848127    .0177752
         ppent_by_at_post |  -.0006302   .0619098    -0.01   0.992    -.1220679    .1208076
          debt_by_at_post |  -.0903364   .0835848    -1.08   0.280    -.2542903    .0736176
          cash_by_at_post |  -.0875889   .1414294    -0.62   0.536    -.3650067    .1898289
        sales_growth_post |   -.065599   .0647006    -1.01   0.311     -.192511     .061313
      dividend_payer_post |  -.0368485   .0322188    -1.14   0.253    -.1000467    .0263496
                 nol_post |   .0277034   .0292772     0.95   0.344    -.0297246    .0851315
             ret_vol_post |  -.2947193      .3176    -0.93   0.354    -.9177005    .3282619
                leveraged |   .4729964   .0254597    18.58   0.000     .4230564    .5229363
                 maturity |   .0390698   .0053446     7.31   0.000     .0285863    .0495533
log_deal_amount_converted |  -.0446638   .0085135    -5.25   0.000    -.0613633   -.0279644
            secured_dummy |   .1826266   .0198517     9.20   0.000     .1436869    .2215663
       tranche_type_dummy |   .2093012   .0126689    16.52   0.000     .1844508    .2341515
        tranche_o_a_dummy |    .020212   .0166773     1.21   0.226     -.012501     .052925
            sponsor_dummy |   .2697053    .025648    10.52   0.000     .2193961    .3200145
                    _cons |   5.042709   .0819407    61.54   0.000      4.88198    5.203438
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |        10           0          10     |
         ff_48 |        49           1          48     |
 sp_rating_num |        19           1          18    ?|
-------------------------------------------------------+
? = number of redundant parameters may be higher

.         estimates store m6

. restore

. * save the results (esttab) using overleaf_dir
. esttab m1 m2 m5 m6 using "$overleaf_dir/log_margin_did_both_rule.tex", replace ///
> nodepvars nomti nonum collabels(none) label b(3) se(3) parentheses ///
> star(* 0.10 ** 0.05 *** 0.01) ar2 plain lines fragment noconstant keep(treated treated_post treated_loss treated_loss_post)
(output written to /Users/zrsong/Dropbox (MIT)/Apps/Overleaf/M&A Debt/Tables/log_margin_did_both_rule.tex)

. est clear

. 
. /*********** 
>         Regressions with Other Loan Terms 
>         ***********/
. 
. *** DID regressions (30% and Loss Rule: Perf Pricing and Num Fin Cov) ***
. 
. reghdfe perf_pricing_dummy treated treated_post treated_loss treated_loss_post `controls' `deal_controls', absorb(year ff_48 sp_rating_num) vc
> e(cluster gvkey)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =      4,712
Absorbing 3 HDFE groups                           F(  21,   1518) =      13.94
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.2183
                                                  Adj R-squared   =     0.2021
                                                  Within R-sq.    =     0.0841
Number of clusters (gvkey)   =      1,519         Root MSE        =     0.3927

                                           (Std. err. adjusted for 1,519 clusters in gvkey)
-------------------------------------------------------------------------------------------
                          |               Robust
       perf_pricing_dummy | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |   .0145816   .0331089     0.44   0.660    -.0503624    .0795256
             treated_post |  -.0287135   .0379333    -0.76   0.449    -.1031207    .0456938
             treated_loss |  -.0137453   .0315845    -0.44   0.663    -.0756993    .0482086
        treated_loss_post |   .0120873    .038252     0.32   0.752     -.062945    .0871196
                   log_at |  -.0181139   .0069009    -2.62   0.009    -.0316502   -.0045776
         cash_flows_by_at |   .2562392   .1129052     2.27   0.023     .0347724     .477706
           market_to_book |   .0104399   .0081753     1.28   0.202    -.0055962     .026476
              ppent_by_at |  -.0595446   .0370869    -1.61   0.109    -.1322915    .0132023
               debt_by_at |  -.1256414   .0413111    -3.04   0.002    -.2066743   -.0446084
               cash_by_at |  -.1745401   .0711849    -2.45   0.014    -.3141713   -.0349088
             sales_growth |  -.0152653   .0269788    -0.57   0.572     -.068185    .0376544
           dividend_payer |  -.0087368   .0180651    -0.48   0.629     -.044172    .0266985
                      nol |   .0193414   .0183855     1.05   0.293    -.0167223    .0554051
                  ret_vol |    .087131   .1354825     0.64   0.520    -.1786217    .3528836
                leveraged |  -.1615402   .0243339    -6.64   0.000    -.2092719   -.1138085
                 maturity |  -.0017857   .0049849    -0.36   0.720    -.0115637    .0079922
log_deal_amount_converted |   .0584491   .0075488     7.74   0.000      .043642    .0732563
            secured_dummy |    .074515   .0210759     3.54   0.000      .033174    .1158561
       tranche_type_dummy |  -.0779223   .0125336    -6.22   0.000    -.1025072   -.0533373
        tranche_o_a_dummy |    .086674   .0176499     4.91   0.000     .0520532    .1212948
            sponsor_dummy |   -.098792   .0217303    -4.55   0.000    -.1414166   -.0561674
                    _cons |   .1174961   .0717694     1.64   0.102    -.0232817    .2582739
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |        10           0          10     |
         ff_48 |        49           1          48     |
 sp_rating_num |        19           1          18    ?|
-------------------------------------------------------+
? = number of redundant parameters may be higher

. estimates store m1

. reghdfe num_fin_cov treated treated_post treated_loss treated_loss_post `controls' `deal_controls', absorb(year ff_48 sp_rating_num) vce(clust
> er gvkey)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =      4,712
Absorbing 3 HDFE groups                           F(  21,   1518) =      13.20
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.1737
                                                  Adj R-squared   =     0.1566
                                                  Within R-sq.    =     0.0927
Number of clusters (gvkey)   =      1,519         Root MSE        =     0.7598

                                           (Std. err. adjusted for 1,519 clusters in gvkey)
-------------------------------------------------------------------------------------------
                          |               Robust
              num_fin_cov | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |   .0119777   .0779137     0.15   0.878    -.1408522    .1648076
             treated_post |  -.0675585   .0910969    -0.74   0.458    -.2462477    .1111306
             treated_loss |  -.0844201   .0777779    -1.09   0.278    -.2369835    .0681434
        treated_loss_post |    .030468   .0917675     0.33   0.740    -.1495365    .2104725
                   log_at |  -.1072152    .015905    -6.74   0.000    -.1384133   -.0760171
         cash_flows_by_at |   .6207134   .2489189     2.49   0.013     .1324521    1.108975
           market_to_book |  -.0051733   .0178559    -0.29   0.772    -.0401981    .0298515
              ppent_by_at |  -.0282476   .0913924    -0.31   0.757    -.2075164    .1510213
               debt_by_at |  -.0436339   .1019242    -0.43   0.669     -.243561    .1562932
               cash_by_at |  -.4293243   .1644408    -2.61   0.009    -.7518795   -.1067691
             sales_growth |  -.0196606   .0587993    -0.33   0.738    -.1349971     .095676
           dividend_payer |   .0092855   .0435037     0.21   0.831    -.0760482    .0946193
                      nol |     .05351   .0394549     1.36   0.175     -.023882     .130902
                  ret_vol |   .1150618   .3309642     0.35   0.728    -.5341336    .7642573
                leveraged |  -.2375898   .0558217    -4.26   0.000    -.3470857   -.1280939
                 maturity |   -.034149   .0102896    -3.32   0.001    -.0543323   -.0139656
log_deal_amount_converted |   .0910337   .0153688     5.92   0.000     .0608873    .1211801
            secured_dummy |    .119612   .0471358     2.54   0.011     .0271539    .2120702
       tranche_type_dummy |  -.0585599   .0215107    -2.72   0.007    -.1007538    -.016366
        tranche_o_a_dummy |  -.0268883   .0382688    -0.70   0.482    -.1019537    .0481771
            sponsor_dummy |  -.4089599   .0444593    -9.20   0.000    -.4961682   -.3217517
                    _cons |   1.205004   .1683063     7.16   0.000     .8748665    1.535141
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |        10           0          10     |
         ff_48 |        49           1          48     |
 sp_rating_num |        19           1          18    ?|
-------------------------------------------------------+
? = number of redundant parameters may be higher

. estimates store m2

. *** DID regressions (covenant tightness)
. reghdfe pviol treated treated_post treated_loss treated_loss_post `controls' `deal_controls', absorb(year ff_48 sp_rating_num) vce(cluster gvk
> ey)
(dropped 2 singleton observations)
(MWFE estimator converged in 8 iterations)

HDFE Linear regression                            Number of obs   =      1,329
Absorbing 3 HDFE groups                           F(  21,    437) =       1.54
Statistics robust to heteroskedasticity           Prob > F        =     0.0600
                                                  R-squared       =     0.1563
                                                  Adj R-squared   =     0.0979
                                                  Within R-sq.    =     0.0482
Number of clusters (gvkey)   =        438         Root MSE        =     0.2111

                                             (Std. err. adjusted for 438 clusters in gvkey)
-------------------------------------------------------------------------------------------
                          |               Robust
                    pviol | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |   .0864765   .0407888     2.12   0.035       .00631     .166643
             treated_post |  -.0991298   .0514342    -1.93   0.055    -.2002191    .0019594
             treated_loss |  -.0137897   .0355258    -0.39   0.698    -.0836125     .056033
        treated_loss_post |   .0114423   .0477195     0.24   0.811    -.0823459    .1052306
                   log_at |   -.016075    .009673    -1.66   0.097    -.0350864    .0029364
         cash_flows_by_at |   .0193564     .10257     0.19   0.850    -.1822355    .2209483
           market_to_book |  -.0063929   .0104306    -0.61   0.540    -.0268932    .0141074
              ppent_by_at |   .0191019   .0438551     0.44   0.663    -.0670913     .105295
               debt_by_at |   .0586981   .0542562     1.08   0.280    -.0479375    .1653337
               cash_by_at |   .1294288   .0910909     1.42   0.156    -.0496019    .3084595
             sales_growth |   .0345229   .0332749     1.04   0.300    -.0308758    .0999216
           dividend_payer |  -.0080934   .0190426    -0.43   0.671    -.0455199    .0293331
                      nol |  -.0233905   .0225286    -1.04   0.300    -.0676685    .0208874
                  ret_vol |   .1355093   .1961285     0.69   0.490    -.2499631    .5209816
                leveraged |   .0029879   .0213238     0.14   0.889    -.0389221     .044898
                 maturity |   -.003472   .0047311    -0.73   0.463    -.0127705    .0058264
log_deal_amount_converted |   .0029146   .0072286     0.40   0.687    -.0112926    .0171217
            secured_dummy |    .052885     .02065     2.56   0.011     .0122993    .0934707
       tranche_type_dummy |   .0080231     .01003     0.80   0.424    -.0116899     .027736
        tranche_o_a_dummy |   .0172533   .0155015     1.11   0.266    -.0132135      .04772
            sponsor_dummy |  -.0440315   .0281477    -1.56   0.118    -.0993532    .0112902
                    _cons |   .1041373   .0969333     1.07   0.283     -.086376    .2946507
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |        10           0          10     |
         ff_48 |        41           1          40     |
 sp_rating_num |        17           1          16    ?|
-------------------------------------------------------+
? = number of redundant parameters may be higher

. estimates store m3

. 
. *** DID regressions (30% and Loss Rule: Loan Size and Maturity) ***
. 
. local deal_controls_2 "leveraged secured_dummy tranche_type_dummy tranche_o_a_dummy sponsor_dummy"

. 
. reghdfe deal_amount_converted treated treated_post treated_loss treated_loss_post `controls' `deal_controls_2', absorb(year ff_48 sp_rating_nu
> m) vce(cluster gvkey)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =      4,712
Absorbing 3 HDFE groups                           F(  19,   1518) =       9.23
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.2956
                                                  Adj R-squared   =     0.2812
                                                  Within R-sq.    =     0.1864
Number of clusters (gvkey)   =      1,519         Root MSE        =  2239.7904

                                    (Std. err. adjusted for 1,519 clusters in gvkey)
------------------------------------------------------------------------------------
                   |               Robust
deal_amount_conv~d | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------------+----------------------------------------------------------------
           treated |  -590.6488   239.0273    -2.47   0.014    -1059.508     -121.79
      treated_post |   54.41072   266.5079     0.20   0.838    -468.3519    577.1734
      treated_loss |   13.27195   179.9568     0.07   0.941    -339.7183    366.2622
 treated_loss_post |   319.6899   229.2631     1.39   0.163    -130.0161    769.3959
            log_at |    754.493   76.31067     9.89   0.000     604.8075    904.1785
  cash_flows_by_at |   23.51482    791.379     0.03   0.976    -1528.797    1575.827
    market_to_book |   32.25469   57.05354     0.57   0.572    -79.65743    144.1668
       ppent_by_at |  -408.4375    277.141    -1.47   0.141    -952.0574    135.1823
        debt_by_at |   871.0806    398.972     2.18   0.029     88.48592    1653.675
        cash_by_at |   260.0985   638.5849     0.41   0.684    -992.5036    1512.701
      sales_growth |   117.2643   171.2316     0.68   0.494    -218.6112    453.1398
    dividend_payer |  -34.07468   133.8025    -0.25   0.799     -296.532    228.3827
               nol |  -40.18729   144.6207    -0.28   0.781    -323.8649    243.4903
           ret_vol |   422.9759   947.2704     0.45   0.655    -1435.122    2281.073
         leveraged |  -221.6091   129.3972    -1.71   0.087    -475.4253    32.20708
     secured_dummy |   193.4704   117.6398     1.64   0.100    -37.28344    424.2243
tranche_type_dummy |  -21.08943    86.5845    -0.24   0.808    -190.9273    148.7485
 tranche_o_a_dummy |  -619.0971   135.5073    -4.57   0.000    -884.8984   -353.2958
     sponsor_dummy |   74.26612    160.452     0.46   0.644    -240.4651    388.9973
             _cons |  -4287.263   620.9817    -6.90   0.000    -5505.336    -3069.19
------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |        10           0          10     |
         ff_48 |        49           1          48     |
 sp_rating_num |        19           1          18    ?|
-------------------------------------------------------+
? = number of redundant parameters may be higher

. estimates store m4

. 
. reghdfe log_deal_amount_converted treated treated_post treated_loss treated_loss_post `controls' `deal_controls_2', absorb(year ff_48 sp_ratin
> g_num) vce(cluster gvkey)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =      4,712
Absorbing 3 HDFE groups                           F(  19,   1518) =      44.90
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.4731
                                                  Adj R-squared   =     0.4623
                                                  Within R-sq.    =     0.3397
Number of clusters (gvkey)   =      1,519         Root MSE        =     0.9419

                                    (Std. err. adjusted for 1,519 clusters in gvkey)
------------------------------------------------------------------------------------
                   |               Robust
log_deal_amount_~d | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------------+----------------------------------------------------------------
           treated |  -.3942616   .1053301    -3.74   0.000    -.6008695   -.1876537
      treated_post |   .1162908   .1259063     0.92   0.356    -.1306779    .3632596
      treated_loss |  -.1365216   .0992084    -1.38   0.169    -.3311217    .0580784
 treated_loss_post |   .1820681   .1200775     1.52   0.130    -.0534672    .4176034
            log_at |   .4516409   .0208086    21.70   0.000     .4108242    .4924577
  cash_flows_by_at |   .4524142    .391967     1.15   0.249    -.3164401    1.221269
    market_to_book |   .0772009   .0228492     3.38   0.001     .0323815    .1220202
       ppent_by_at |  -.2247402   .1327051    -1.69   0.091     -.485045    .0355646
        debt_by_at |   .4766995   .1263251     3.77   0.000     .2289093    .7244896
        cash_by_at |  -.2624422   .2590171    -1.01   0.311    -.7705116    .2456272
      sales_growth |   .0405518   .0854863     0.47   0.635     -.127132    .2082355
    dividend_payer |   .0040459   .0530756     0.08   0.939    -.1000633    .1081551
               nol |  -.0005175   .0544436    -0.01   0.992    -.1073101    .1062751
           ret_vol |    .352372   .4080892     0.86   0.388    -.4481064     1.15285
         leveraged |  -.2569198   .0656806    -3.91   0.000     -.385754   -.1280855
     secured_dummy |   .2438684   .0568043     4.29   0.000     .1324453    .3552916
tranche_type_dummy |   .0090003   .0295791     0.30   0.761      -.04902    .0670206
 tranche_o_a_dummy |  -.4390858   .0435128   -10.09   0.000    -.5244373   -.3537342
     sponsor_dummy |   .1241759   .0737116     1.68   0.092    -.0204114    .2687632
             _cons |   3.058635   .2041458    14.98   0.000     2.658197    3.459073
------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |        10           0          10     |
         ff_48 |        49           1          48     |
 sp_rating_num |        19           1          18    ?|
-------------------------------------------------------+
? = number of redundant parameters may be higher

. estimates store m5

. 
. reghdfe maturity treated treated_post treated_loss treated_loss_post `controls' `deal_controls_2', absorb(year ff_48 sp_rating_num) vce(cluste
> r gvkey)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =      4,712
Absorbing 3 HDFE groups                           F(  19,   1518) =      20.70
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.2943
                                                  Adj R-squared   =     0.2799
                                                  Within R-sq.    =     0.0981
Number of clusters (gvkey)   =      1,519         Root MSE        =     1.3624

                                    (Std. err. adjusted for 1,519 clusters in gvkey)
------------------------------------------------------------------------------------
                   |               Robust
          maturity | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------------+----------------------------------------------------------------
           treated |  -.1219986   .1210356    -1.01   0.314    -.3594134    .1154162
      treated_post |   .0229699   .1484127     0.15   0.877    -.2681458    .3140856
      treated_loss |  -.0137845   .1125933    -0.12   0.903    -.2346393    .2070704
 treated_loss_post |  -.1535047   .1455014    -1.06   0.292    -.4389098    .1319004
            log_at |  -.0340326   .0209603    -1.62   0.105    -.0751468    .0070815
  cash_flows_by_at |   .8410928   .4160464     2.02   0.043     .0250062    1.657179
    market_to_book |   .0166526   .0230371     0.72   0.470    -.0285354    .0618406
       ppent_by_at |  -.2001893   .1361177    -1.47   0.142     -.467188    .0668095
        debt_by_at |  -.3003003    .167538    -1.79   0.073    -.6289308    .0283302
        cash_by_at |   .1666294    .212608     0.78   0.433    -.2504071    .5836659
      sales_growth |   .0408761   .0930977     0.44   0.661    -.1417377    .2234898
    dividend_payer |  -.0837358   .0613209    -1.37   0.172    -.2040185    .0365468
               nol |   .1109325   .0635484     1.75   0.081    -.0137195    .2355844
           ret_vol |  -.8291876   .4916585    -1.69   0.092    -1.793589    .1352143
         leveraged |   .1393196   .0702903     1.98   0.048     .0014432    .2771959
     secured_dummy |   .6742118   .0604265    11.16   0.000     .5556836      .79274
tranche_type_dummy |   .0287044   .0562571     0.51   0.610    -.0816456    .1390543
 tranche_o_a_dummy |   .3154094   .0550154     5.73   0.000     .2074952    .4233237
     sponsor_dummy |   .5731956   .0656386     8.73   0.000     .4444437    .7019475
             _cons |   4.355834    .217949    19.99   0.000     3.928321    4.783347
------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |        10           0          10     |
         ff_48 |        49           1          48     |
 sp_rating_num |        19           1          18    ?|
-------------------------------------------------------+
? = number of redundant parameters may be higher

. estimates store m6

. 
. * save the results (esttab) using overleaf_dir
. esttab m1 m2 m3 m4 m5 m6 using "$overleaf_dir/other_terms_did_both_rule.tex", replace ///
> nodepvars nomti nonum collabels(none) label b(3) se(3) parentheses ///
> star(* 0.10 ** 0.05 *** 0.01) ar2 plain lines fragment noconstant keep(treated treated_post treated_loss treated_loss_post)
(output written to /Users/zrsong/Dropbox (MIT)/Apps/Overleaf/M&A Debt/Tables/other_terms_did_both_rule.tex)

. est clear

. 
. *********** Dynamic Regressions ***********
. local dynamic_treated "treated_year_2014 treated_year_2015 treated_year_2016 treated_year_2018 treated_year_2019 treated_year_2020 treated_yea
> r_2021 treated_year_2022 treated_year_2023"

. local dynamic_treated_loss "treated_loss_year_2014 treated_loss_year_2015 treated_loss_year_2016 treated_loss_year_2018 treated_loss_year_2019
>  treated_loss_year_2020 treated_loss_year_2021 treated_loss_year_2022 treated_loss_year_2023"

. 
. *** Both Rule ***
. reghdfe margin_bps treated treated_loss `dynamic_treated' `dynamic_treated_loss' `controls' `deal_controls', absorb(year ff_48 sp_rating_num) 
> vce(cluster ff_48)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =      4,712
Absorbing 3 HDFE groups                           F(  37,     48) =     344.19
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.5504
                                                  Adj R-squared   =     0.5395
                                                  Within R-sq.    =     0.3939
Number of clusters (ff_48)   =         49         Root MSE        =   120.8578

                                              (Std. err. adjusted for 49 clusters in ff_48)
-------------------------------------------------------------------------------------------
                          |               Robust
               margin_bps | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |   31.29011   18.89204     1.66   0.104    -6.694885    69.27511
             treated_loss |   3.863425   19.35939     0.20   0.843    -35.06123    42.78808
        treated_year_2014 |  -47.31529   23.68507    -2.00   0.051    -94.93733    .3067384
        treated_year_2015 |  -22.50889   26.47137    -0.85   0.399    -75.73314    30.71536
        treated_year_2016 |   -9.92138   31.75226    -0.31   0.756    -73.76358    53.92082
        treated_year_2018 |  -21.44914   23.74236    -0.90   0.371    -69.18636    26.28809
        treated_year_2019 |    36.2317   38.78591     0.93   0.355     -41.7526     114.216
        treated_year_2020 |  -62.77294   35.13881    -1.79   0.080    -133.4243    7.878376
        treated_year_2021 |  -10.06371   37.47945    -0.27   0.789     -85.4212    65.29378
        treated_year_2022 |  -8.862044   20.42959    -0.43   0.666    -49.93849     32.2144
        treated_year_2023 |  -15.38703   30.28731    -0.51   0.614    -76.28374    45.50968
   treated_loss_year_2014 |   88.33878   28.73788     3.07   0.003      30.5574    146.1202
   treated_loss_year_2015 |   23.19364   35.81053     0.65   0.520    -48.80825    95.19552
   treated_loss_year_2016 |   51.25834   26.01259     1.97   0.055    -1.043477    103.5602
   treated_loss_year_2018 |  -12.19968   30.14532    -0.40   0.687    -72.81091    48.41155
   treated_loss_year_2019 |  -63.64608   30.11116    -2.11   0.040    -124.1886   -3.103525
   treated_loss_year_2020 |   63.91145   30.93874     2.07   0.044     1.704939     126.118
   treated_loss_year_2021 |  -24.28793   30.49495    -0.80   0.430    -85.60212    37.02627
   treated_loss_year_2022 |   5.248042   35.39158     0.15   0.883    -65.91149    76.40758
   treated_loss_year_2023 |   19.07941   33.50037     0.57   0.572    -48.27759    86.43641
                   log_at |  -5.319288   2.676233    -1.99   0.053    -10.70022    .0616395
         cash_flows_by_at |  -175.3114   87.25361    -2.01   0.050    -350.7466    .1237038
           market_to_book |  -1.627683   4.607457    -0.35   0.725    -10.89159     7.63623
              ppent_by_at |   18.81062   16.45858     1.14   0.259    -14.28158    51.90282
               debt_by_at |   41.29106   15.83413     2.61   0.012     9.454402    73.12772
               cash_by_at |    49.8301   29.47825     1.69   0.097    -9.439886    109.1001
             sales_growth |  -3.007647   11.29748    -0.27   0.791    -25.72276    19.70747
           dividend_payer |   8.336644   6.842931     1.22   0.229    -5.421991    22.09528
                      nol |  -5.276759   5.087609    -1.04   0.305    -15.50608    4.952564
                  ret_vol |   186.3232   47.25427     3.94   0.000     91.31217    281.3343
                leveraged |   80.59763   11.94429     6.75   0.000     56.58203    104.6132
                 maturity |   8.595041   2.504206     3.43   0.001     3.559997    13.63009
log_deal_amount_converted |  -15.45749   3.306551    -4.67   0.000    -22.10575    -8.80922
            secured_dummy |   64.00092   5.994184    10.68   0.000      51.9488    76.05303
       tranche_type_dummy |   74.52124   10.12303     7.36   0.000     54.16752    94.87496
        tranche_o_a_dummy |   10.87579   5.891055     1.85   0.071    -.9689653    22.72055
            sponsor_dummy |   86.87346   9.612779     9.04   0.000     67.54567    106.2012
                    _cons |   183.3983   30.96991     5.92   0.000     121.1292    245.6675
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |        10           1           9     |
         ff_48 |        49          49           0    *|
 sp_rating_num |        19           1          18     |
-------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

. mat c = e(b)'

. mata st_matrix("srdvcovbt",sqrt(diagonal(st_matrix("e(V)"))))

. mat res = c , srdvcovbt

. 
. esttab mat(res) using "$overleaf_dir/margin_did_dynamic_both_ff48.csv", replace mlab(none)
(file /Users/zrsong/Dropbox (MIT)/Apps/Overleaf/M&A Debt/Tables/margin_did_dynamic_both_ff48.csv not found)
(output written to /Users/zrsong/Dropbox (MIT)/Apps/Overleaf/M&A Debt/Tables/margin_did_dynamic_both_ff48.csv)

. 
. * drop 2020 and re run the regression
. drop if year == 2020
(292 observations deleted)

. reghdfe margin_bps treated treated_loss `dynamic_treated' `dynamic_treated_loss' `controls' `deal_controls', absorb(year ff_48 sp_rating_num) 
> vce(cluster ff_48)
(MWFE estimator converged in 7 iterations)
note: treated_year_2020 omitted because of collinearity
note: treated_loss_year_2020 omitted because of collinearity

HDFE Linear regression                            Number of obs   =      4,420
Absorbing 3 HDFE groups                           F(  35,     48) =     299.00
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.5547
                                                  Adj R-squared   =     0.5434
                                                  Within R-sq.    =     0.3969
Number of clusters (ff_48)   =         49         Root MSE        =   118.5520

                                              (Std. err. adjusted for 49 clusters in ff_48)
-------------------------------------------------------------------------------------------
                          |               Robust
               margin_bps | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
                  treated |   30.15246   18.62805     1.62   0.112    -7.301747    67.60666
             treated_loss |   7.750475   19.20918     0.40   0.688    -30.87216    46.37311
        treated_year_2014 |   -44.4318   23.67768    -1.88   0.067    -92.03897    3.175378
        treated_year_2015 |  -21.16582   25.33185    -0.84   0.408    -72.09892    29.76729
        treated_year_2016 |  -4.527249   32.16443    -0.14   0.889    -69.19817    60.14368
        treated_year_2018 |  -17.73433   23.26987    -0.76   0.450    -64.52153    29.05288
        treated_year_2019 |   39.60463   40.38285     0.98   0.332    -41.59052    120.7998
        treated_year_2020 |          0  (omitted)
        treated_year_2021 |  -5.622781   37.57206    -0.15   0.882    -81.16648    69.92092
        treated_year_2022 |  -6.559367   20.45261    -0.32   0.750    -47.68209    34.56336
        treated_year_2023 |  -14.44135   30.12115    -0.48   0.634    -75.00398    46.12128
   treated_loss_year_2014 |   85.66582   29.21236     2.93   0.005     26.93044    144.4012
   treated_loss_year_2015 |   17.92988   34.51204     0.52   0.606    -51.46123    87.32098
   treated_loss_year_2016 |   48.24364   25.84338     1.87   0.068    -3.717964    100.2052
   treated_loss_year_2018 |  -12.85228   29.82516    -0.43   0.668    -72.81978    47.11522
   treated_loss_year_2019 |  -71.33331   28.76009    -2.48   0.017    -129.1593   -13.50728
   treated_loss_year_2020 |          0  (omitted)
   treated_loss_year_2021 |  -25.60904   30.37359    -0.84   0.403    -86.67924    35.46117
   treated_loss_year_2022 |   4.093403   35.73551     0.11   0.909    -67.75767    75.94447
   treated_loss_year_2023 |   18.46424   33.82038     0.55   0.588     -49.5362    86.46468
                   log_at |  -6.663053   2.685263    -2.48   0.017    -12.06214    -1.26397
         cash_flows_by_at |  -177.2074    89.7017    -1.98   0.054    -357.5648    3.149914
           market_to_book |  -1.396545   4.386455    -0.32   0.752     -10.2161    7.423014
              ppent_by_at |   15.26312   16.65382     0.92   0.364    -18.22163    48.74788
               debt_by_at |   38.27592   17.40271     2.20   0.033     3.285427    73.26642
               cash_by_at |   33.74317   30.93194     1.09   0.281    -28.44967    95.93601
             sales_growth |  -1.073573   10.87819    -0.10   0.922    -22.94563    20.79849
           dividend_payer |   8.223853   7.056571     1.17   0.250    -5.964333    22.41204
                      nol |   -4.87572   4.702623    -1.04   0.305    -14.33098    4.579537
                  ret_vol |   161.0038   48.27207     3.34   0.002     63.94633    258.0613
                leveraged |   76.69439    10.9936     6.98   0.000     54.59028     98.7985
                 maturity |   9.901615   2.277909     4.35   0.000     5.321573    14.48166
log_deal_amount_converted |  -15.99097   3.095986    -5.17   0.000    -22.21587   -9.766076
            secured_dummy |   61.70358    6.18466     9.98   0.000     49.26849    74.13867
       tranche_type_dummy |   71.84696   9.813694     7.32   0.000      52.1152    91.57871
        tranche_o_a_dummy |    8.45391   5.812152     1.45   0.152    -3.232204    20.14003
            sponsor_dummy |   86.52269   9.577294     9.03   0.000     67.26625    105.7791
                    _cons |   201.8591   30.85004     6.54   0.000      139.831    263.8873
-------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
-------------------------------------------------------+
   Absorbed FE | Categories  - Redundant  = Num. Coefs |
---------------+---------------------------------------|
          year |         9           1           8     |
         ff_48 |        49          49           0    *|
 sp_rating_num |        19           1          18     |
-------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

. mat c = e(b)'

. mata st_matrix("srdvcovbt",sqrt(diagonal(st_matrix("e(V)"))))

. mat res = c , srdvcovbt

. 
. esttab mat(res) using "$overleaf_dir/margin_did_dynamic_both_ff48_no2020.csv", replace mlab(none)
(file /Users/zrsong/Dropbox (MIT)/Apps/Overleaf/M&A Debt/Tables/margin_did_dynamic_both_ff48_no2020.csv not found)
(output written to /Users/zrsong/Dropbox (MIT)/Apps/Overleaf/M&A Debt/Tables/margin_did_dynamic_both_ff48_no2020.csv)

. 
end of do-file

