--------------------------------------------------
      name:  <unnamed>
       log:  /Users/zrsong/MIT Dropbox/Zirui Song/
> Research Projects/MPS_Interest Deductibility and
>  Debt Contracting/4. Code/Dealscan_Analysis.log
  log type:  text
 opened on:  14 Jan 2025, 10:45:50

. 
. use "../3. Data/Processed/tranche_level_ds_compa
> .dta", clear

. 
. if "`c(hostname)'" == "mphill-surface4" {
. global overleaf_dir "C:\Users\mphill\Dropbox\App
> s\Overleaf\M&A Debt\Tables"
. global fig_dir "C:\Users\mphill\Dropbox\Apps\Ove
> rleaf\M&A Debt\Figures"
.         
. }

. 
. global overleaf_dir "/Users/zrsong/Dropbox (MIT)
> /Apps/Overleaf/M&A Debt/Tables"

. global fig_dir "/Users/zrsong/Dropbox (MIT)/Apps
> /Overleaf/M&A Debt/Figures"

. 
. keep if year >= 2014
(0 observations deleted)

. 
. * Check if the directory exists, if not create i
> t
. cap mkdir "$overleaf_dir"

. 
. * gen logged bps
. gen log_margin_bps = log(margin_bps)

. 
. * list of controls in regression 
. gen log_at = log(at)

. gen log_deal_amount_converted = log(deal_amount_
> converted)

. 
. local controls "log_at cash_flows_by_at market_t
> o_book ppent_by_at debt_by_at cash_by_at sales_g
> rowth dividend_payer nol ret_vol"

. local deal_controls "leveraged maturity log_deal
> _amount_converted secured_dummy tranche_type_dum
> my tranche_o_a_dummy sponsor_dummy"

. 
. * generate interaction between controls and post
. foreach var in `controls' {
  2.     gen `var'_post = `var' * post
  3.         gen `var'_treated = `var' * treated
  4.         gen `var'_treated_loss = `var' * trea
> ted_loss
  5. }

. 
. local controls_post "log_at_post cash_flows_by_a
> t_post market_to_book_post ppent_by_at_post debt
> _by_at_post cash_by_at_post sales_growth_post di
> vidend_payer_post nol_post ret_vol_post"

. local controls_treated "log_at_treated cash_flow
> s_by_at_treated market_to_book_treated ppent_by_
> at_treated debt_by_at_treated cash_by_at_treated
>  sales_growth_treated dividend_payer_treated nol
> _treated ret_vol_treated"

. local controls_treated_loss "log_at_treated_loss
>  cash_flows_by_at_treated_loss market_to_book_tr
> eated_loss ppent_by_at_treated_loss debt_by_at_t
> reated_loss cash_by_at_treated_loss sales_growth
> _treated_loss dividend_payer_treated_loss nol_tr
> eated_loss ret_vol_treated_loss"

. 
. * winsorize at 1% and 99%
. foreach var in margin_bps log_margin_bps `contro
> ls' `deal_controls' `controls_post' `controls_tr
> eated' `controls_treated_loss' {
  2.     winsor2 `var', cuts(1 99) replace
  3. }

. 
end of do-file

. tab treated treated_loss

           |     treated_loss
   treated |         0          1 |     Total
-----------+----------------------+----------
         0 |     3,219        380 |     3,599 
         1 |       383        730 |     1,113 
-----------+----------------------+----------
     Total |     3,602      1,110 |     4,712 

